{"version":3,"sources":["webpack:///fenix-ui-filter-utils.min.js","webpack:///webpack/bootstrap 40bad4990f2a1a809a27","webpack:///./src/js/index.js","webpack:///./src/config/errors.js","webpack:///./src/config/config.js","webpack:///external \"jquery\"","webpack:///external \"underscore\"","webpack:///external \"loglevel\"","webpack:///external \"handlebars\"","webpack:///external \"moment\""],"names":["define","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_8__","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","ERR","C","$","_","log","Handlebars","Moment","Utils","this","prototype","compileFilter","values","items","extend","config","formatConfig","format","template","output","compileTemplate","tmpl","key","dimension","toLocaleLowerCase","createTimeFilter","createEnumerationFilter","warn","model","cl","distinct","codes","join","error","uid","compile","process","JSON","parse","each","obj","version","v","time","valuesAreObject","from","findWhere","parent","to","couple","value","push","map","a","parseInt","sort","b","i","enumeration","cleanArray","actual","newArray","length","createConfiguration","o","info","configuration","_isFenixResource","metadata","dsd","columns","bind","contains","forbiddenSubjects","subject","exclude","_endsWith","lang","toUpperCase","_processFxColumn","common","INVALID_FENIX_RESOURCE","str","suffix","indexOf","mergeConfigurations","s","sync","toolbar","hasOwnProperty","selector","conf","_isFenixColumn","dataType","toLowerCase","_processCustomCodeColumn","_processEnumerationColumn","_processCodeColumn","_processDateColumn","_processMonthColumn","_processYearColumn","_processTimeColumn","_processTextColumn","_processLabelColumn","_processNumberColumn","_processPercentageColumn","_processBooleanColumn","UNKNOWN_FENIX_COLUMN_DATATYPE","INVALID_FENIX_COLUMN","_commonProcessColumn","_configTreeFromSource","domain","source","label","_configTreeFromDistinct","period","timelist","timeList","_configTimeFromPeriod","_configTreeFromTimelist","_configTemporalColumn","_configInput","type","title","Array","isArray","idCodeList","columnId","columnDataType","core","multiple","_configTreeFromCodelist","lazy","hideFilter","code","_configDropdownFromPeriod","_configTreeFromPeriod","_configDropdownFromTimelist","_getTimeFormat","_getTimeLabelFormat","_configDropdownFromSource","_configDropdownFromCodelist","String","_configRangeFromPeriod","min","max","prettify_enabled","timeLabelFormat","res","valid","errors","resourceType","getNestedProperty","INVALID_METADATA","INVALID_DSD","INVALID_COLUMNS","INVALID_COLUMN_DATATYPE","path","arr","split","shift","assign","prop","e","Object","toString","apply","undefined","prefix","defaultPeriodFrom","defaultPeriodTo"],"mappings":"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","file":"fenix-ui-filter-utils.min.js","sourcesContent":["define([\"jquery\",\"underscore\",\"loglevel\",\"handlebars\",\"moment\"], function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t    __webpack_require__(2),\n\t    __webpack_require__(3),\n\t    __webpack_require__(4),\n\t    __webpack_require__(5),\n\t    __webpack_require__(6),\n\t    __webpack_require__(7),\n\t    __webpack_require__(8)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function (ERR, C, $, _, log, Handlebars, Moment) {\n\t\n\t    'use strict';\n\t\n\t    function Utils() {\n\t\n\t        return this;\n\t    }\n\t\n\t    //FENIX\n\t\n\t    Utils.prototype.compileFilter = function (id, values, items) {\n\t\n\t        $.extend(true, this, C);\n\t\n\t        var config = items[id] || {},\n\t            formatConfig = config.format || {},\n\t            template = formatConfig.template,\n\t            output = formatConfig.output || \"codes\";\n\t\n\t        if (template) {\n\t            return this.compileTemplate(id, values, config, template);\n\t        }\n\t\n\t        var key = formatConfig.dimension || id,\n\t            tmpl;\n\t\n\t        switch (output.toLocaleLowerCase()) {\n\t            case \"codes\" :\n\t\n\t                tmpl = '{ \"codes\":[{\"uid\": \"{{{uid}}}\", \"version\": \"{{version}}\", \"codes\": [{{{codes}}}] } ]}';\n\t                return this.compileTemplate(id, values, config, key, tmpl);\n\t\n\t                break;\n\t            case \"time\" :\n\t\n\t                return this.createTimeFilter(id, values, config, key);\n\t                break;\n\t\n\t            case \"enumeration\" :\n\t\n\t                return this.createEnumerationFilter(id, values, config, key);\n\t                break;\n\t            default :\n\t                log.warn(id + \" not included in the result set. Missing format configuration.\");\n\t                return {};\n\t        }\n\t\n\t    };\n\t\n\t    Utils.prototype.compileTemplate = function (id, values, config, key, template) {\n\t\n\t        /*\n\t         Priority\n\t         - values\n\t         - format configuration\n\t         - code list configuration\n\t         */\n\t\n\t        var model = $.extend(true, config.cl, config.format, config.distinct, {codes: '\"' + values.join('\",\"') + '\"'});\n\t\n\t        if (!template) {\n\t            log.error(\"Impossible to find '\" + id + \"' process template. Check your '\" + id + \"'.filter.process configuration.\")\n\t        }\n\t\n\t        if (!model.uid) {\n\t            log.error(\"Impossible to find '\" + id + \"' code list configuration for FENIX output format export.\");\n\t            return;\n\t        }\n\t\n\t        var tmpl = Handlebars.compile(template),\n\t            process = JSON.parse(tmpl(model)),\n\t            codes = process.codes;\n\t\n\t        //Remove empty version attributes\n\t        _.each(codes, function (obj) {\n\t            if (!obj.version) {\n\t                delete obj.version;\n\t            }\n\t        });\n\t\n\t        return process;\n\t\n\t    };\n\t\n\t    Utils.prototype.createTimeFilter = function (id, values, config, key) {\n\t\n\t        var time = [],\n\t            valuesAreObject = typeof values[0] === 'object',\n\t            v;\n\t\n\t        if (valuesAreObject) {\n\t\n\t            var from = _.findWhere(values, {parent: \"from\"}) || {},\n\t                to = _.findWhere(values, {parent: \"to\"}) || {},\n\t                couple = {from: null, to: null};\n\t\n\t            couple.from = from.value;\n\t            couple.to = to.value;\n\t\n\t            time.push($.extend({}, couple));\n\t\n\t        } else {\n\t\n\t            v = values.map(function (a) {\n\t                return parseInt(a, 10);\n\t            }).sort(function (a, b) {\n\t                return a - b;\n\t            });\n\t\n\t\n\t            _.each(v, function (i) {\n\t                time.push({from: i, to: i});\n\t            });\n\t\n\t        }\n\t\n\t        return {time: time};\n\t    };\n\t\n\t    Utils.prototype.createEnumerationFilter = function (id, values, config, key) {\n\t\n\t        return {enumeration: values};\n\t\n\t    };\n\t\n\t    Utils.prototype.cleanArray = function (actual) {\n\t        var newArray = [];\n\t        for (var i = 0; i < actual.length; i++) {\n\t            if (actual[i]) {\n\t                newArray.push(actual[i]);\n\t            }\n\t        }\n\t        return newArray;\n\t    };\n\t\n\t    /* FILTER UTILS */\n\t\n\t    /**\n\t     * Creates a FENIX filter configuration from a\n\t     * FENIX resource\n\t     * @param {Object} o\n\t     * @return {Object} filter configuration\n\t     */\n\t    Utils.prototype.createConfiguration = function (o) {\n\t        log.info(\"Create filter configuration from:\");\n\t        log.info(o);\n\t\n\t        $.extend(true, this, C, o);\n\t\n\t        var configuration = {};\n\t\n\t        if (this._isFenixResource(o.model) === true) {\n\t            log.info(\"Valid resource\");\n\t\n\t            _.each(o.model.metadata.dsd.columns, _.bind(function (c) {\n\t\n\t                 if (!_.contains(this.forbiddenSubjects, c.subject) && !_.contains(this.exclude, c.id) && !(this._endsWith(c.id, \"_\" + this.lang.toUpperCase()))) {\n\t                    configuration[c.id] = $.extend(true, {}, this._processFxColumn(c, o.model.metadata), this.common);\n\t                } else {\n\t                    log.warn(c.id + \" was excluded. [id: \" + c.id + \", subject: \" + c.subject + \"]\");\n\t                }\n\t\n\t            }, this));\n\t\n\t        } else {\n\t            log.error(ERR.INVALID_FENIX_RESOURCE);\n\t        }\n\t\n\t        return configuration;\n\t    };\n\t\n\t    Utils.prototype._endsWith = function(str, suffix) {\n\t        if(str.indexOf(suffix, str.length - suffix.length) === -1) {\n\t            return false;\n\t        } else {\n\t             return true;\n\t         }\n\t    };\n\t\n\t    /**\n\t     * Merges a FENIX filter configuration with\n\t     * default values\n\t     * @param {Object} config\n\t     * @param {Object} sync\n\t     * @return {Object} filter configuration\n\t     */\n\t    Utils.prototype.mergeConfigurations = function (config, s) {\n\t\n\t        var sync = s.toolbar ? s.toolbar : s;\n\t\n\t        if (sync) {\n\t\n\t            var values = sync.values;\n\t\n\t            _.each(values, _.bind(function (obj, key) {\n\t\n\t                if (config.hasOwnProperty(key)) {\n\t                    config[key].selector.default = values[key];\n\t                }\n\t\n\t            }, this));\n\t        }\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    // private fns\n\t\n\t    Utils.prototype._processFxColumn = function (c, metadata) {\n\t\n\t        var conf = {};\n\t\n\t        if (this._isFenixColumn(c) === true) {\n\t            log.info(\"Valid column with dataType: \" + c.dataType.toLowerCase() + \" [column.id = \" + c.id + \" ]\");\n\t\n\t            switch (c.dataType.toLowerCase()) {\n\t                case \"customcode\" :\n\t                    conf = this._processCustomCodeColumn(c);\n\t                    break;\n\t                case \"enumeration\" :\n\t                    conf = this._processEnumerationColumn(c);\n\t                    break;\n\t                case \"code\" :\n\t                    conf = this._processCodeColumn(c, metadata);\n\t                    break;\n\t                case \"date\" :\n\t                    conf = this._processDateColumn(c);\n\t                    break;\n\t                case \"month\" :\n\t                    conf = this._processMonthColumn(c, metadata);\n\t                    break;\n\t                case \"year\" :\n\t                    conf = this._processYearColumn(c, metadata);\n\t                    break;\n\t                case \"time\" :\n\t                    conf = this._processTimeColumn(c, metadata);\n\t                    break;\n\t                case \"text\" :\n\t                    conf = this._processTextColumn(c);\n\t                    break;\n\t                case \"label\" :\n\t                    conf = this._processLabelColumn(c);\n\t                    break;\n\t                case \"number\" :\n\t                    conf = this._processNumberColumn(c);\n\t                    break;\n\t                case \"percentage\" :\n\t                    conf = this._processPercentageColumn(c);\n\t                    break;\n\t                case \"bool\" :\n\t                    conf = this._processBooleanColumn(c);\n\t                    break;\n\t                default:\n\t                    log.error(ERR.UNKNOWN_FENIX_COLUMN_DATATYPE, c.dataType.toLowerCase());\n\t\n\t            }\n\t        } else {\n\t            log.error(ERR.INVALID_FENIX_COLUMN);\n\t        }\n\t\n\t        return $.extend(true, {}, conf, this._commonProcessColumn(c));\n\t    };\n\t\n\t    /* processes for CODE FX column */\n\t\n\t    Utils.prototype._processCustomCodeColumn = function (c) {\n\t        return this._configTreeFromSource(c);\n\t        //return this._configDropdownFromSource(c);\n\t    };\n\t\n\t    Utils.prototype._processEnumerationColumn = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            enumeration = domain.enumeration || [];\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        //config.selector.hideFilter = true;\n\t        config.selector.source = _.map(enumeration, function (obj) {\n\t            return {\n\t                value: obj,\n\t                label: obj\n\t            }\n\t        });\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._processCodeColumn = function (c, metadata) {\n\t\n\t        return this._configTreeFromDistinct(c, metadata);\n\t        //return this._configTreeFromCodelist(c);\n\t        //return this._configDropdownFromCodelist(c);\n\t\n\t    };\n\t\n\t    /* processes for TIME FX column */\n\t\n\t    Utils.prototype._processDateColumn = function (c) {\n\t\n\t        var domain = c.domain || {},\n\t            period = domain.period,\n\t            timelist = domain.timeList;\n\t\n\t        if (period && period.from && period.to) {\n\t            //return this._configRangeFromPeriod(c);\n\t            return this._configTimeFromPeriod(c);\n\t            //return this._configDropdownFromPeriod(c);\n\t        }\n\t\n\t        if (timelist) {\n\t            //return this._configDropdownFromTimelist(c);\n\t            return this._configTreeFromTimelist(c);\n\t        }\n\t\n\t        log.warn(\"Impossible to find process for column \" + c.id);\n\t\n\t        return {};\n\t\n\t    };\n\t\n\t    Utils.prototype._processMonthColumn = function (c, metadata) {\n\t\n\t        return this._configTemporalColumn(c, metadata);\n\t    };\n\t\n\t    Utils.prototype._processYearColumn = function (c, metadata) {\n\t\n\t        return this._configTemporalColumn(c, metadata);\n\t    };\n\t\n\t    Utils.prototype._processTimeColumn = function (c, metadata) {\n\t\n\t        return this._configTemporalColumn(c, metadata);\n\t\n\t    };\n\t\n\t    /* processes for TEXT FX column */\n\t\n\t    Utils.prototype._processTextColumn = function (c) {\n\t\n\t        return this._configInput(c, {type: \"text\"});\n\t    };\n\t\n\t    Utils.prototype._processLabelColumn = function (c) {\n\t\n\t        return this._configInput(c, {type: \"text\"});\n\t    };\n\t\n\t    /* processes for OTHER FX column */\n\t\n\t    Utils.prototype._processNumberColumn = function (c) {\n\t\n\t        return this._configInput(c, {type: \"number\", output: \"time\"});\n\t    };\n\t\n\t    Utils.prototype._processPercentageColumn = function (c) {\n\t        log.warn(\"TODO process\");\n\t    };\n\t\n\t    Utils.prototype._processBooleanColumn = function (c) {\n\t        return this._configInput(c, {type: \"checkbox\"});\n\t\n\t    };\n\t\n\t    /* Common processes */\n\t\n\t    Utils.prototype._commonProcessColumn = function (c) {\n\t\n\t        var config = {\n\t            template: {},\n\t            format: {\n\t                dimension: c.id\n\t            }\n\t        };\n\t\n\t        if (c.title && c.title[this.lang.toUpperCase()]) {\n\t            config.template.title = c.title[this.lang.toUpperCase()];\n\t        }\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._configTreeFromDistinct = function (c, metadata) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.idCodeList) {\n\t            log.error(\"Impossible to find idCodeList\");\n\t        }\n\t\n\t        //configure code list\n\t        config.distinct = {\n\t            uid : metadata.uid,\n\t            version : metadata.version,\n\t            columnId :c.id,\n\t            columnDataType: \"code\"\n\t        };\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.config = {\n\t            core: { multiple: true }\n\t        };\n\t        //config.selector.lazy = true;\n\t        //config.selector.hideFilter = true;\n\t\n\t        config.format = {};\n\t        config.format.output = \"codes\";\n\t        config.format.uid = cl.idCodeList;\n\t        config.format.version = cl.version;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromCodelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.idCodeList) {\n\t            log.error(\"Impossible to find idCodeList\");\n\t        }\n\t\n\t        //configure code list\n\t        config.cl = {};\n\t        config.cl.uid = cl.idCodeList;\n\t        config.cl.version = cl.version;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.lazy = true;\n\t        config.selector.config = {\n\t            core: { multiple: true }\n\t        };\n\t        config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromSource = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.codes) {\n\t            log.error(\"Impossible to find codes\");\n\t        }\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t            return {\n\t                value: obj.code,\n\t                label: obj.label[this.lang.toUpperCase()]\n\t            }\n\t        }, this));\n\t        //config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t        config.selector.from = period.from;\n\t        config.selector.to = period.to;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.from = period.from;\n\t        config.selector.to = period.to;\n\t        //config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromTimelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            timelist = domain.timeList || [],\n\t            format = this._getTimeFormat(timelist[0]);\n\t\n\t        //configure selector\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t        config.selector.source = _.map(timelist, _.bind(function (obj) {\n\t            return {\n\t                value: obj,\n\t                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t            }\n\t        }, this));\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromTimelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            timelist = domain.timeList || [],\n\t            format = this._getTimeFormat(timelist[0]);\n\t\n\t        //configure selector\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.source = _.map(timelist, _.bind(function (obj) {\n\t            return {\n\t                value: obj,\n\t                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t            }\n\t        }, this));\n\t        //config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromSource = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.codes) {\n\t            log.error(\"Impossible to find codes\");\n\t        }\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t            return {\n\t                value: obj.code,\n\t                label: obj.label[this.lang.toUpperCase()]\n\t            }\n\t        }, this));\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromCodelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.idCodeList) {\n\t            log.error(\"Impossible to find idCodeList\");\n\t        }\n\t\n\t        //configure code list\n\t        config.cl = {};\n\t        config.cl.uid = cl.idCodeList;\n\t        config.cl.version = cl.version;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTimeFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period,\n\t            from = String(period.from),\n\t            to = String(period.to);\n\t\n\t        //configure selector\n\t        config.selector = {\n\t            config: {}\n\t        };\n\t\n\t        config.selector.id = \"tree\";\n\t        config.selector.from = parseInt(from, 10);\n\t        config.selector.to = parseInt(to, 10);\n\t        //config.selector.hideFilter = true;\n\t        config.format = {\n\t            output: \"time\"\n\t        };\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._configRangeFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period;\n\t\n\t        //configure selector\n\t        config.selector = {\n\t            config: {}\n\t        };\n\t\n\t        config.selector.id = \"range\";\n\t        config.selector.config.min = period.from;\n\t        config.selector.config.max = period.to;\n\t        config.selector.config.type = \"double\";\n\t        config.selector.config.prettify_enabled = false;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configInput = function (c, o) {\n\t\n\t        var config = {\n\t            selector: {},\n\t            format: {\n\t                output: o.output || \"enumeration\"\n\t            }\n\t        };\n\t\n\t        config.selector.id = \"input\";\n\t        config.selector.type = o.type || \"text\";\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._configTemporalColumn = function (c, metadata) {\n\t\n\t        var domain = c.domain || {},\n\t            period = domain.period,\n\t            timelist = domain.timeList;\n\t\n\t        if (period && period.from && period.to) {\n\t            //return this._configRangeFromPeriod(c);\n\t            //return this._configTimeFromPeriod(c);\n\t            //return this._configDropdownFromPeriod(c);\n\t            return this._configTreeFromPeriod(c);\n\t        }\n\t\n\t        if (timelist) {\n\t            //return this._configDropdownFromTimelist(c);\n\t            return this._configTreeFromTimelist(c);\n\t        }\n\t\n\t\n\t        //Distinct\n\t\n\t        var config = {};\n\t\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.config = {\n\t            core: { multiple: true },\n\t        };\n\t\n\t        //config.selector.hideFilter = true;\n\t        config.format = {\n\t            output: \"time\"\n\t        };\n\t\n\t        //configure code list\n\t        config.distinct = {\n\t            uid : metadata.uid,\n\t            version : metadata.version,\n\t            columnId :c.id,\n\t            columnDataType: \"number\"\n\t        };\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._getTimeFormat = function (s) {\n\t\n\t        var format;\n\t\n\t        switch (String(s).length) {\n\t            case 4 :\n\t                format = \"YYYY\";\n\t                break;\n\t            case 6:\n\t                format = \"YYYY MM\";\n\t                break;\n\t            case 8:\n\t                format = \"YYYY MM DD\";\n\t                break;\n\t            case 12:\n\t                format = \"YYYY MM DD hh mm\";\n\t                break;\n\t            case 14:\n\t                format = \"YYYY MM DD hh mm ss\";\n\t                break;\n\t            default:\n\t                log.warn(\"Impossible to find time format for: \" + format);\n\t        }\n\t\n\t        return format;\n\t\n\t    };\n\t\n\t    Utils.prototype._getTimeLabelFormat = function (s) {\n\t\n\t        if (this.timeLabelFormat) {\n\t            return this.timeLabelFormat;\n\t        }\n\t\n\t        var format;\n\t\n\t        switch (String(s).length) {\n\t            case 4 :\n\t                format = \"YYYY\";\n\t                break;\n\t            case 6:\n\t                format = \"L\";\n\t                break;\n\t            case 8:\n\t                format = \"L\";\n\t                break;\n\t            case 14:\n\t                format = \"lll\";\n\t                break;\n\t            default:\n\t                log.warn(\"Impossible to find time label format for: \" + format);\n\t        }\n\t\n\t        return format;\n\t\n\t    };\n\t\n\t    /* Validation */\n\t\n\t    Utils.prototype._isFenixResource = function (res) {\n\t\n\t        var valid = true,\n\t            errors = [],\n\t            resourceType = this.getNestedProperty(\"metadata.meContent.resourceRepresentationType\", res);\n\t\n\t        if (!res.hasOwnProperty(\"metadata\")) {\n\t            errors.push({code: ERR.INVALID_METADATA});\n\t            valid = false;\n\t        }\n\t\n\t        if (valid && !res.metadata.hasOwnProperty(\"dsd\")) {\n\t            errors.push({code: ERR.INVALID_DSD});\n\t            valid = false;\n\t        }\n\t\n\t        //NOT need field for FENIX GEOGRAPHIC RESOURCE\n\t        if (resourceType === \"dataset\" && valid && (!res.metadata.dsd.hasOwnProperty(\"columns\") || !Array.isArray(res.metadata.dsd.columns))) {\n\t            errors.push({code: ERR.INVALID_COLUMNS});\n\t        }\n\t\n\t        return errors.length > 0 ? errors : valid;\n\t    };\n\t\n\t    Utils.prototype._isFenixColumn = function (c) {\n\t\n\t        var valid = true,\n\t            errors = [];\n\t\n\t        if (!c.hasOwnProperty(\"dataType\")) {\n\t            errors.push({code: ERR.INVALID_COLUMN_DATATYPE});\n\t            valid = false;\n\t        }\n\t\n\t        return errors.length > 0 ? errors : valid;\n\t    };\n\t\n\t    Utils.prototype.getNestedProperty = function (path, obj) {\n\t\n\t        var obj = _.extend({}, obj),\n\t            arr = path.split(\".\");\n\t\n\t        while (arr.length && (obj = obj[arr.shift()]));\n\t\n\t        return obj;\n\t\n\t    };\n\t\n\t\n\t    Utils.prototype.assign = function (obj, prop, value) {\n\t        if (typeof prop === \"string\")\n\t            prop = prop.split(\".\");\n\t\n\t        if (prop.length > 1) {\n\t            var e = prop.shift();\n\t            this.assign(obj[e] =\n\t                    Object.prototype.toString.call(obj[e]) === \"[object Object]\"\n\t                        ? obj[e]\n\t                        : {},\n\t                prop,\n\t                value);\n\t        } else {\n\t            obj[prop[0]] = value;\n\t        }\n\t    };\n\t\n\t    Utils.prototype.getNestedProperty = function (path, obj) {\n\t\n\t        var obj = _.extend({}, obj),\n\t            arr = path.split(\".\");\n\t\n\t        while (arr.length && (obj = obj[arr.shift()]));\n\t\n\t        return obj;\n\t\n\t    };\n\t\n\t    return new Utils();\n\t\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function ( ) {\n\t\n\t    'use strict';\n\t\n\t    var prefix = \"\";\n\t\n\t    return {\n\t\n\t        //Utils\n\t        INVALID_FENIX_RESOURCE: prefix + \"invalid_fenix_resource\",\n\t        INVALID_METADATA: prefix + \"invalid_metadata\",\n\t        INVALID_DSD: prefix + \"invalid_dsd\",\n\t        INVALID_COLUMNS: prefix + \"invalid_dsd\",\n\t        INVALID_FENIX_COLUMN: prefix + \"invalid_fenix_column\",\n\t        INVALID_COLUMN_DATATYPE : prefix + \"invalid_column_datatype\",\n\t        UNKNOWN_FENIX_COLUMN_DATATYPE :prefix + \"unknown_fenix_column_datatype\",\n\t\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t\n\t    'use strict';\n\t\n\t    return {\n\t\n\t        forbiddenSubjects: [\"value\"],\n\t        exclude: [], //exclude id\n\t        common: {},\n\t        lang: 'EN',\n\t        defaultPeriodFrom: 1970,\n\t        defaultPeriodTo: 2017\n\t\n\t    }\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }\n/******/ ])});;\n\n\n/** WEBPACK FOOTER **\n ** fenix-ui-filter-utils.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 40bad4990f2a1a809a27\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\ndefine([\n    '../config/errors',\n    '../config/config',\n    'jquery',\n    'underscore',\n    'loglevel',\n    'handlebars',\n    'moment'\n], function (ERR, C, $, _, log, Handlebars, Moment) {\n\n    'use strict';\n\n    function Utils() {\n\n        return this;\n    }\n\n    //FENIX\n\n    Utils.prototype.compileFilter = function (id, values, items) {\n\n        $.extend(true, this, C);\n\n        var config = items[id] || {},\n            formatConfig = config.format || {},\n            template = formatConfig.template,\n            output = formatConfig.output || \"codes\";\n\n        if (template) {\n            return this.compileTemplate(id, values, config, template);\n        }\n\n        var key = formatConfig.dimension || id,\n            tmpl;\n\n        switch (output.toLocaleLowerCase()) {\n            case \"codes\" :\n\n                tmpl = '{ \"codes\":[{\"uid\": \"{{{uid}}}\", \"version\": \"{{version}}\", \"codes\": [{{{codes}}}] } ]}';\n                return this.compileTemplate(id, values, config, key, tmpl);\n\n                break;\n            case \"time\" :\n\n                return this.createTimeFilter(id, values, config, key);\n                break;\n\n            case \"enumeration\" :\n\n                return this.createEnumerationFilter(id, values, config, key);\n                break;\n            default :\n                log.warn(id + \" not included in the result set. Missing format configuration.\");\n                return {};\n        }\n\n    };\n\n    Utils.prototype.compileTemplate = function (id, values, config, key, template) {\n\n        /*\n         Priority\n         - values\n         - format configuration\n         - code list configuration\n         */\n\n        var model = $.extend(true, config.cl, config.format, config.distinct, {codes: '\"' + values.join('\",\"') + '\"'});\n\n        if (!template) {\n            log.error(\"Impossible to find '\" + id + \"' process template. Check your '\" + id + \"'.filter.process configuration.\")\n        }\n\n        if (!model.uid) {\n            log.error(\"Impossible to find '\" + id + \"' code list configuration for FENIX output format export.\");\n            return;\n        }\n\n        var tmpl = Handlebars.compile(template),\n            process = JSON.parse(tmpl(model)),\n            codes = process.codes;\n\n        //Remove empty version attributes\n        _.each(codes, function (obj) {\n            if (!obj.version) {\n                delete obj.version;\n            }\n        });\n\n        return process;\n\n    };\n\n    Utils.prototype.createTimeFilter = function (id, values, config, key) {\n\n        var time = [],\n            valuesAreObject = typeof values[0] === 'object',\n            v;\n\n        if (valuesAreObject) {\n\n            var from = _.findWhere(values, {parent: \"from\"}) || {},\n                to = _.findWhere(values, {parent: \"to\"}) || {},\n                couple = {from: null, to: null};\n\n            couple.from = from.value;\n            couple.to = to.value;\n\n            time.push($.extend({}, couple));\n\n        } else {\n\n            v = values.map(function (a) {\n                return parseInt(a, 10);\n            }).sort(function (a, b) {\n                return a - b;\n            });\n\n\n            _.each(v, function (i) {\n                time.push({from: i, to: i});\n            });\n\n        }\n\n        return {time: time};\n    };\n\n    Utils.prototype.createEnumerationFilter = function (id, values, config, key) {\n\n        return {enumeration: values};\n\n    };\n\n    Utils.prototype.cleanArray = function (actual) {\n        var newArray = [];\n        for (var i = 0; i < actual.length; i++) {\n            if (actual[i]) {\n                newArray.push(actual[i]);\n            }\n        }\n        return newArray;\n    };\n\n    /* FILTER UTILS */\n\n    /**\n     * Creates a FENIX filter configuration from a\n     * FENIX resource\n     * @param {Object} o\n     * @return {Object} filter configuration\n     */\n    Utils.prototype.createConfiguration = function (o) {\n        log.info(\"Create filter configuration from:\");\n        log.info(o);\n\n        $.extend(true, this, C, o);\n\n        var configuration = {};\n\n        if (this._isFenixResource(o.model) === true) {\n            log.info(\"Valid resource\");\n\n            _.each(o.model.metadata.dsd.columns, _.bind(function (c) {\n\n                 if (!_.contains(this.forbiddenSubjects, c.subject) && !_.contains(this.exclude, c.id) && !(this._endsWith(c.id, \"_\" + this.lang.toUpperCase()))) {\n                    configuration[c.id] = $.extend(true, {}, this._processFxColumn(c, o.model.metadata), this.common);\n                } else {\n                    log.warn(c.id + \" was excluded. [id: \" + c.id + \", subject: \" + c.subject + \"]\");\n                }\n\n            }, this));\n\n        } else {\n            log.error(ERR.INVALID_FENIX_RESOURCE);\n        }\n\n        return configuration;\n    };\n\n    Utils.prototype._endsWith = function(str, suffix) {\n        if(str.indexOf(suffix, str.length - suffix.length) === -1) {\n            return false;\n        } else {\n             return true;\n         }\n    };\n\n    /**\n     * Merges a FENIX filter configuration with\n     * default values\n     * @param {Object} config\n     * @param {Object} sync\n     * @return {Object} filter configuration\n     */\n    Utils.prototype.mergeConfigurations = function (config, s) {\n\n        var sync = s.toolbar ? s.toolbar : s;\n\n        if (sync) {\n\n            var values = sync.values;\n\n            _.each(values, _.bind(function (obj, key) {\n\n                if (config.hasOwnProperty(key)) {\n                    config[key].selector.default = values[key];\n                }\n\n            }, this));\n        }\n\n        return config;\n\n    };\n\n    // private fns\n\n    Utils.prototype._processFxColumn = function (c, metadata) {\n\n        var conf = {};\n\n        if (this._isFenixColumn(c) === true) {\n            log.info(\"Valid column with dataType: \" + c.dataType.toLowerCase() + \" [column.id = \" + c.id + \" ]\");\n\n            switch (c.dataType.toLowerCase()) {\n                case \"customcode\" :\n                    conf = this._processCustomCodeColumn(c);\n                    break;\n                case \"enumeration\" :\n                    conf = this._processEnumerationColumn(c);\n                    break;\n                case \"code\" :\n                    conf = this._processCodeColumn(c, metadata);\n                    break;\n                case \"date\" :\n                    conf = this._processDateColumn(c);\n                    break;\n                case \"month\" :\n                    conf = this._processMonthColumn(c, metadata);\n                    break;\n                case \"year\" :\n                    conf = this._processYearColumn(c, metadata);\n                    break;\n                case \"time\" :\n                    conf = this._processTimeColumn(c, metadata);\n                    break;\n                case \"text\" :\n                    conf = this._processTextColumn(c);\n                    break;\n                case \"label\" :\n                    conf = this._processLabelColumn(c);\n                    break;\n                case \"number\" :\n                    conf = this._processNumberColumn(c);\n                    break;\n                case \"percentage\" :\n                    conf = this._processPercentageColumn(c);\n                    break;\n                case \"bool\" :\n                    conf = this._processBooleanColumn(c);\n                    break;\n                default:\n                    log.error(ERR.UNKNOWN_FENIX_COLUMN_DATATYPE, c.dataType.toLowerCase());\n\n            }\n        } else {\n            log.error(ERR.INVALID_FENIX_COLUMN);\n        }\n\n        return $.extend(true, {}, conf, this._commonProcessColumn(c));\n    };\n\n    /* processes for CODE FX column */\n\n    Utils.prototype._processCustomCodeColumn = function (c) {\n        return this._configTreeFromSource(c);\n        //return this._configDropdownFromSource(c);\n    };\n\n    Utils.prototype._processEnumerationColumn = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            enumeration = domain.enumeration || [];\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        //config.selector.hideFilter = true;\n        config.selector.source = _.map(enumeration, function (obj) {\n            return {\n                value: obj,\n                label: obj\n            }\n        });\n\n        return config;\n    };\n\n    Utils.prototype._processCodeColumn = function (c, metadata) {\n\n        return this._configTreeFromDistinct(c, metadata);\n        //return this._configTreeFromCodelist(c);\n        //return this._configDropdownFromCodelist(c);\n\n    };\n\n    /* processes for TIME FX column */\n\n    Utils.prototype._processDateColumn = function (c) {\n\n        var domain = c.domain || {},\n            period = domain.period,\n            timelist = domain.timeList;\n\n        if (period && period.from && period.to) {\n            //return this._configRangeFromPeriod(c);\n            return this._configTimeFromPeriod(c);\n            //return this._configDropdownFromPeriod(c);\n        }\n\n        if (timelist) {\n            //return this._configDropdownFromTimelist(c);\n            return this._configTreeFromTimelist(c);\n        }\n\n        log.warn(\"Impossible to find process for column \" + c.id);\n\n        return {};\n\n    };\n\n    Utils.prototype._processMonthColumn = function (c, metadata) {\n\n        return this._configTemporalColumn(c, metadata);\n    };\n\n    Utils.prototype._processYearColumn = function (c, metadata) {\n\n        return this._configTemporalColumn(c, metadata);\n    };\n\n    Utils.prototype._processTimeColumn = function (c, metadata) {\n\n        return this._configTemporalColumn(c, metadata);\n\n    };\n\n    /* processes for TEXT FX column */\n\n    Utils.prototype._processTextColumn = function (c) {\n\n        return this._configInput(c, {type: \"text\"});\n    };\n\n    Utils.prototype._processLabelColumn = function (c) {\n\n        return this._configInput(c, {type: \"text\"});\n    };\n\n    /* processes for OTHER FX column */\n\n    Utils.prototype._processNumberColumn = function (c) {\n\n        return this._configInput(c, {type: \"number\", output: \"time\"});\n    };\n\n    Utils.prototype._processPercentageColumn = function (c) {\n        log.warn(\"TODO process\");\n    };\n\n    Utils.prototype._processBooleanColumn = function (c) {\n        return this._configInput(c, {type: \"checkbox\"});\n\n    };\n\n    /* Common processes */\n\n    Utils.prototype._commonProcessColumn = function (c) {\n\n        var config = {\n            template: {},\n            format: {\n                dimension: c.id\n            }\n        };\n\n        if (c.title && c.title[this.lang.toUpperCase()]) {\n            config.template.title = c.title[this.lang.toUpperCase()];\n        }\n\n        return config;\n    };\n\n    Utils.prototype._configTreeFromDistinct = function (c, metadata) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.idCodeList) {\n            log.error(\"Impossible to find idCodeList\");\n        }\n\n        //configure code list\n        config.distinct = {\n            uid : metadata.uid,\n            version : metadata.version,\n            columnId :c.id,\n            columnDataType: \"code\"\n        };\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.config = {\n            core: { multiple: true }\n        };\n        //config.selector.lazy = true;\n        //config.selector.hideFilter = true;\n\n        config.format = {};\n        config.format.output = \"codes\";\n        config.format.uid = cl.idCodeList;\n        config.format.version = cl.version;\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromCodelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.idCodeList) {\n            log.error(\"Impossible to find idCodeList\");\n        }\n\n        //configure code list\n        config.cl = {};\n        config.cl.uid = cl.idCodeList;\n        config.cl.version = cl.version;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.lazy = true;\n        config.selector.config = {\n            core: { multiple: true }\n        };\n        config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromSource = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.codes) {\n            log.error(\"Impossible to find codes\");\n        }\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n            return {\n                value: obj.code,\n                label: obj.label[this.lang.toUpperCase()]\n            }\n        }, this));\n        //config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n        config.selector.from = period.from;\n        config.selector.to = period.to;\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.from = period.from;\n        config.selector.to = period.to;\n        //config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromTimelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            timelist = domain.timeList || [],\n            format = this._getTimeFormat(timelist[0]);\n\n        //configure selector\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n        config.selector.source = _.map(timelist, _.bind(function (obj) {\n            return {\n                value: obj,\n                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n            }\n        }, this));\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromTimelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            timelist = domain.timeList || [],\n            format = this._getTimeFormat(timelist[0]);\n\n        //configure selector\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.source = _.map(timelist, _.bind(function (obj) {\n            return {\n                value: obj,\n                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n            }\n        }, this));\n        //config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromSource = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.codes) {\n            log.error(\"Impossible to find codes\");\n        }\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n            return {\n                value: obj.code,\n                label: obj.label[this.lang.toUpperCase()]\n            }\n        }, this));\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromCodelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.idCodeList) {\n            log.error(\"Impossible to find idCodeList\");\n        }\n\n        //configure code list\n        config.cl = {};\n        config.cl.uid = cl.idCodeList;\n        config.cl.version = cl.version;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n\n        return config;\n\n    };\n\n    Utils.prototype._configTimeFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period,\n            from = String(period.from),\n            to = String(period.to);\n\n        //configure selector\n        config.selector = {\n            config: {}\n        };\n\n        config.selector.id = \"tree\";\n        config.selector.from = parseInt(from, 10);\n        config.selector.to = parseInt(to, 10);\n        //config.selector.hideFilter = true;\n        config.format = {\n            output: \"time\"\n        };\n\n        return config;\n    };\n\n    Utils.prototype._configRangeFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period;\n\n        //configure selector\n        config.selector = {\n            config: {}\n        };\n\n        config.selector.id = \"range\";\n        config.selector.config.min = period.from;\n        config.selector.config.max = period.to;\n        config.selector.config.type = \"double\";\n        config.selector.config.prettify_enabled = false;\n\n        return config;\n\n    };\n\n    Utils.prototype._configInput = function (c, o) {\n\n        var config = {\n            selector: {},\n            format: {\n                output: o.output || \"enumeration\"\n            }\n        };\n\n        config.selector.id = \"input\";\n        config.selector.type = o.type || \"text\";\n\n        return config;\n    };\n\n    Utils.prototype._configTemporalColumn = function (c, metadata) {\n\n        var domain = c.domain || {},\n            period = domain.period,\n            timelist = domain.timeList;\n\n        if (period && period.from && period.to) {\n            //return this._configRangeFromPeriod(c);\n            //return this._configTimeFromPeriod(c);\n            //return this._configDropdownFromPeriod(c);\n            return this._configTreeFromPeriod(c);\n        }\n\n        if (timelist) {\n            //return this._configDropdownFromTimelist(c);\n            return this._configTreeFromTimelist(c);\n        }\n\n\n        //Distinct\n\n        var config = {};\n\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.config = {\n            core: { multiple: true },\n        };\n\n        //config.selector.hideFilter = true;\n        config.format = {\n            output: \"time\"\n        };\n\n        //configure code list\n        config.distinct = {\n            uid : metadata.uid,\n            version : metadata.version,\n            columnId :c.id,\n            columnDataType: \"number\"\n        };\n\n        return config;\n    };\n\n    Utils.prototype._getTimeFormat = function (s) {\n\n        var format;\n\n        switch (String(s).length) {\n            case 4 :\n                format = \"YYYY\";\n                break;\n            case 6:\n                format = \"YYYY MM\";\n                break;\n            case 8:\n                format = \"YYYY MM DD\";\n                break;\n            case 12:\n                format = \"YYYY MM DD hh mm\";\n                break;\n            case 14:\n                format = \"YYYY MM DD hh mm ss\";\n                break;\n            default:\n                log.warn(\"Impossible to find time format for: \" + format);\n        }\n\n        return format;\n\n    };\n\n    Utils.prototype._getTimeLabelFormat = function (s) {\n\n        if (this.timeLabelFormat) {\n            return this.timeLabelFormat;\n        }\n\n        var format;\n\n        switch (String(s).length) {\n            case 4 :\n                format = \"YYYY\";\n                break;\n            case 6:\n                format = \"L\";\n                break;\n            case 8:\n                format = \"L\";\n                break;\n            case 14:\n                format = \"lll\";\n                break;\n            default:\n                log.warn(\"Impossible to find time label format for: \" + format);\n        }\n\n        return format;\n\n    };\n\n    /* Validation */\n\n    Utils.prototype._isFenixResource = function (res) {\n\n        var valid = true,\n            errors = [],\n            resourceType = this.getNestedProperty(\"metadata.meContent.resourceRepresentationType\", res);\n\n        if (!res.hasOwnProperty(\"metadata\")) {\n            errors.push({code: ERR.INVALID_METADATA});\n            valid = false;\n        }\n\n        if (valid && !res.metadata.hasOwnProperty(\"dsd\")) {\n            errors.push({code: ERR.INVALID_DSD});\n            valid = false;\n        }\n\n        //NOT need field for FENIX GEOGRAPHIC RESOURCE\n        if (resourceType === \"dataset\" && valid && (!res.metadata.dsd.hasOwnProperty(\"columns\") || !Array.isArray(res.metadata.dsd.columns))) {\n            errors.push({code: ERR.INVALID_COLUMNS});\n        }\n\n        return errors.length > 0 ? errors : valid;\n    };\n\n    Utils.prototype._isFenixColumn = function (c) {\n\n        var valid = true,\n            errors = [];\n\n        if (!c.hasOwnProperty(\"dataType\")) {\n            errors.push({code: ERR.INVALID_COLUMN_DATATYPE});\n            valid = false;\n        }\n\n        return errors.length > 0 ? errors : valid;\n    };\n\n    Utils.prototype.getNestedProperty = function (path, obj) {\n\n        var obj = _.extend({}, obj),\n            arr = path.split(\".\");\n\n        while (arr.length && (obj = obj[arr.shift()]));\n\n        return obj;\n\n    };\n\n\n    Utils.prototype.assign = function (obj, prop, value) {\n        if (typeof prop === \"string\")\n            prop = prop.split(\".\");\n\n        if (prop.length > 1) {\n            var e = prop.shift();\n            this.assign(obj[e] =\n                    Object.prototype.toString.call(obj[e]) === \"[object Object]\"\n                        ? obj[e]\n                        : {},\n                prop,\n                value);\n        } else {\n            obj[prop[0]] = value;\n        }\n    };\n\n    Utils.prototype.getNestedProperty = function (path, obj) {\n\n        var obj = _.extend({}, obj),\n            arr = path.split(\".\");\n\n        while (arr.length && (obj = obj[arr.shift()]));\n\n        return obj;\n\n    };\n\n    return new Utils();\n\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/index.js\n ** module id = 1\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\n\ndefine(function ( ) {\n\n    'use strict';\n\n    var prefix = \"\";\n\n    return {\n\n        //Utils\n        INVALID_FENIX_RESOURCE: prefix + \"invalid_fenix_resource\",\n        INVALID_METADATA: prefix + \"invalid_metadata\",\n        INVALID_DSD: prefix + \"invalid_dsd\",\n        INVALID_COLUMNS: prefix + \"invalid_dsd\",\n        INVALID_FENIX_COLUMN: prefix + \"invalid_fenix_column\",\n        INVALID_COLUMN_DATATYPE : prefix + \"invalid_column_datatype\",\n        UNKNOWN_FENIX_COLUMN_DATATYPE :prefix + \"unknown_fenix_column_datatype\",\n\n    };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/errors.js\n ** module id = 2\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\n\ndefine(function () {\n\n    'use strict';\n\n    return {\n\n        forbiddenSubjects: [\"value\"],\n        exclude: [], //exclude id\n        common: {},\n        lang: 'EN',\n        defaultPeriodFrom: 1970,\n        defaultPeriodTo: 2017\n\n    }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/config.js\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"loglevel\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"handlebars\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"moment\"\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}