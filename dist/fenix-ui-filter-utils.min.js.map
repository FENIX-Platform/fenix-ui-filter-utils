{"version":3,"sources":["webpack:///fenix-ui-filter-utils.min.js","webpack:///webpack/bootstrap 60209c9d664819b56ea1","webpack:///./src/js/index.js","webpack:///./src/config/errors.js","webpack:///./src/config/config.js","webpack:///external \"jquery\"","webpack:///external \"underscore\"","webpack:///external \"loglevel\"","webpack:///external \"handlebars\""],"names":["define","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","ERR","C","$","_","log","Handlebars","Utils","this","prototype","compileFilter","values","items","extend","config","formatConfig","format","template","output","compileTemplate","tmpl","key","dimension","toLocaleLowerCase","createTimeFilter","createEnumerationFilter","warn","model","cl","codes","join","error","uid","compile","process","JSON","parse","each","obj","version","v","time","valuesAreObject","from","findWhere","parent","to","couple","value","push","map","a","parseInt","sort","b","i","enumeration","cleanArray","actual","newArray","length","createConfiguration","o","info","configuration","_isFenixResource","metadata","dsd","columns","bind","contains","forbiddenSubjects","subject","exclude","endsWith","lang","toUpperCase","_processFxColumn","common","INVALID_FENIX_RESOURCE","mergeConfigurations","s","sync","toolbar","hasOwnProperty","selector","conf","_isFenixColumn","dataType","toLowerCase","_processCustomCodeColumn","_processEnumerationColumn","_processCodeColumn","_processDateColumn","_processMonthColumn","_processYearColumn","_processTimeColumn","_processTextColumn","_processLabelColumn","_processNumberColumn","_processPercentageColumn","_processBooleanColumn","UNKNOWN_FENIX_COLUMN_DATATYPE","INVALID_FENIX_COLUMN","_commonProcessColumn","_configTreeFromSource","domain","hideFilter","source","label","_configTreeFromCodelist","period","timelist","timeList","_configTimeFromPeriod","_configTreeFromTimelist","_configTemporalColumn","_configInput","type","title","Array","isArray","idCodeList","lazy","code","_configDropdownFromPeriod","_configTreeFromPeriod","_configDropdownFromTimelist","_getTimeFormat","Moment","_getTimeLabelFormat","_configDropdownFromSource","_configDropdownFromCodelist","String","_configRangeFromPeriod","min","max","prettify_enabled","defaultPeriodFrom","defaultPeriodTo","timeLabelFormat","res","valid","errors","resourceType","getNestedProperty","INVALID_METADATA","INVALID_DSD","INVALID_COLUMNS","INVALID_COLUMN_DATATYPE","path","arr","split","shift","assign","prop","e","Object","toString","apply","undefined","prefix"],"mappings":"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","file":"fenix-ui-filter-utils.min.js","sourcesContent":["define([\"jquery\",\"underscore\",\"loglevel\",\"handlebars\"], function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t    __webpack_require__(2),\n\t    __webpack_require__(3),\n\t    __webpack_require__(4),\n\t    __webpack_require__(5),\n\t    __webpack_require__(6),\n\t    __webpack_require__(7)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function (ERR, C, $, _, log, Handlebars) {\n\t\n\t    'use strict';\n\t\n\t    function Utils() {\n\t\n\t        return this;\n\t    }\n\t\n\t    //FENIX\n\t\n\t    Utils.prototype.compileFilter = function (id, values, items) {\n\t\n\t        _.extend(this, C);\n\t\n\t        var config = items[id] || {},\n\t            formatConfig = config.format || {},\n\t            template = formatConfig.template,\n\t            output = formatConfig.output || \"codes\";\n\t\n\t        if (template) {\n\t            return this.compileTemplate(id, values, config, template);\n\t        }\n\t\n\t        var key = formatConfig.dimension || id,\n\t            tmpl;\n\t\n\t        switch (output.toLocaleLowerCase()) {\n\t            case \"codes\" :\n\t\n\t                tmpl = '{ \"codes\":[{\"uid\": \"{{{uid}}}\", \"version\": \"{{version}}\", \"codes\": [{{{codes}}}] } ]}';\n\t                return this.compileTemplate(id, values, config, key, tmpl);\n\t\n\t                break;\n\t            case \"time\" :\n\t\n\t                return this.createTimeFilter(id, values, config, key);\n\t                break;\n\t\n\t            case \"enumeration\" :\n\t\n\t                return this.createEnumerationFilter(id, values, config, key);\n\t                break;\n\t            default :\n\t                log.warn(id + \" not included in the result set. Missing format configuration.\");\n\t                return {};\n\t        }\n\t\n\t    };\n\t\n\t    Utils.prototype.compileTemplate = function (id, values, config, key, template) {\n\t\n\t        /*\n\t         Priority\n\t         - values\n\t         - format configuration\n\t         - code list configuration\n\t         */\n\t\n\t        var model = _.extend(config.cl, config.format, {codes: '\"' + values.join('\",\"') + '\"'});\n\t\n\t        if (!template) {\n\t            log.error(\"Impossible to find '\" + id + \"' process template. Check your '\" + id + \"'.filter.process configuration.\")\n\t        }\n\t\n\t        if (!model.uid) {\n\t            log.error(\"Impossible to find '\" + id + \"' code list configuration for FENIX output format export.\");\n\t            return;\n\t        }\n\t\n\t        var tmpl = Handlebars.compile(template),\n\t            process = JSON.parse(tmpl(model)),\n\t            codes = process.codes;\n\t\n\t        //Remove empty version attributes\n\t        _.each(codes, function (obj) {\n\t            if (!obj.version) {\n\t                delete obj.version;\n\t            }\n\t        });\n\t\n\t        return process;\n\t\n\t    };\n\t\n\t    Utils.prototype.createTimeFilter = function (id, values, config, key) {\n\t\n\t        var time = [],\n\t            valuesAreObject = typeof values[0] === 'object',\n\t            v;\n\t\n\t        if (valuesAreObject) {\n\t\n\t            var from = _.findWhere(values, {parent: \"from\"}) || {},\n\t                to = _.findWhere(values, {parent: \"to\"}) || {},\n\t                couple = {from: null, to: null};\n\t\n\t            couple.from = from.value;\n\t            couple.to = to.value;\n\t\n\t            time.push($.extend({}, couple));\n\t\n\t        } else {\n\t\n\t            v = values.map(function (a) {\n\t                return parseInt(a, 10);\n\t            }).sort(function (a, b) {\n\t                return a - b;\n\t            });\n\t\n\t\n\t            _.each(v, function (i) {\n\t                time.push({from: i, to: i});\n\t            });\n\t\n\t        }\n\t\n\t        return {time: time};\n\t    };\n\t\n\t    Utils.prototype.createEnumerationFilter = function (id, values, config, key) {\n\t\n\t        return {enumeration: values};\n\t\n\t    };\n\t\n\t    Utils.prototype.cleanArray = function (actual) {\n\t        var newArray = [];\n\t        for (var i = 0; i < actual.length; i++) {\n\t            if (actual[i]) {\n\t                newArray.push(actual[i]);\n\t            }\n\t        }\n\t        return newArray;\n\t    };\n\t\n\t    /* FILTER UTILS */\n\t\n\t    /**\n\t     * Creates a FENIX filter configuration from a\n\t     * FENIX resource\n\t     * @param {Object} o\n\t     * @return {Object} filter configuration\n\t     */\n\t    Utils.prototype.createConfiguration = function (o) {\n\t        log.info(\"Create filter configuration from:\");\n\t        log.info(o);\n\t\n\t        _.extend(this, C, o);\n\t\n\t        var configuration = {};\n\t\n\t        if (this._isFenixResource(o.model) === true) {\n\t            log.info(\"Valid resource\");\n\t\n\t            _.each(o.model.metadata.dsd.columns, _.bind(function (c) {\n\t\n\t                if (!_.contains(this.forbiddenSubjects, c.subject) && !_.contains(this.exclude, c.id) && !c.id.endsWith(\"_\" + this.lang.toUpperCase())) {\n\t                    configuration[c.id] = _.extend({}, this._processFxColumn(c), this.common);\n\t                } else {\n\t                    log.warn(c.id + \" was excluded. [id: \" + c.id + \", subject: \" + c.subject + \"]\");\n\t                }\n\t\n\t            }, this));\n\t\n\t        } else {\n\t            log.error(ERR.INVALID_FENIX_RESOURCE);\n\t        }\n\t\n\t        return configuration;\n\t    };\n\t\n\t    /**\n\t     * Merges a FENIX filter configuration with\n\t     * default values\n\t     * @param {Object} config\n\t     * @param {Object} sync\n\t     * @return {Object} filter configuration\n\t     */\n\t    Utils.prototype.mergeConfigurations = function (config, s) {\n\t\n\t        var sync = s.toolbar ? s.toolbar : s;\n\t\n\t        if (sync) {\n\t\n\t            var values = sync.values;\n\t\n\t            _.each(values, _.bind(function (obj, key) {\n\t\n\t                if (config.hasOwnProperty(key)) {\n\t                    config[key].selector.default = values[key];\n\t                }\n\t\n\t            }, this));\n\t        }\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    // private fns\n\t\n\t    Utils.prototype._processFxColumn = function (c) {\n\t\n\t        var conf = {};\n\t\n\t        if (this._isFenixColumn(c) === true) {\n\t            log.info(\"Valid column with dataType: \" + c.dataType.toLowerCase() + \" [column.id = \" + c.id + \" ]\");\n\t\n\t            switch (c.dataType.toLowerCase()) {\n\t                case \"customcode\" :\n\t                    conf = this._processCustomCodeColumn(c);\n\t                    break;\n\t                case \"enumeration\" :\n\t                    conf = this._processEnumerationColumn(c);\n\t                    break;\n\t                case \"code\" :\n\t                    conf = this._processCodeColumn(c);\n\t                    break;\n\t                case \"date\" :\n\t                    conf = this._processDateColumn(c);\n\t                    break;\n\t                case \"month\" :\n\t                    conf = this._processMonthColumn(c);\n\t                    break;\n\t                case \"year\" :\n\t                    conf = this._processYearColumn(c);\n\t                    break;\n\t                case \"time\" :\n\t                    conf = this._processTimeColumn(c);\n\t                    break;\n\t                case \"text\" :\n\t                    conf = this._processTextColumn(c);\n\t                    break;\n\t                case \"label\" :\n\t                    conf = this._processLabelColumn(c);\n\t                    break;\n\t                case \"number\" :\n\t                    conf = this._processNumberColumn(c);\n\t                    break;\n\t                case \"percentage\" :\n\t                    conf = this._processPercentageColumn(c);\n\t                    break;\n\t                case \"bool\" :\n\t                    conf = this._processBooleanColumn(c);\n\t                    break;\n\t                default:\n\t                    log.error(ERR.UNKNOWN_FENIX_COLUMN_DATATYPE, c.dataType.toLowerCase());\n\t\n\t            }\n\t        } else {\n\t            log.error(ERR.INVALID_FENIX_COLUMN);\n\t        }\n\t\n\t        return _.extend({}, conf, this._commonProcessColumn(c));\n\t    };\n\t\n\t    /* processes for CODE FX column */\n\t\n\t    Utils.prototype._processCustomCodeColumn = function (c) {\n\t        return this._configTreeFromSource(c);\n\t        //return this._configDropdownFromSource(c);\n\t    };\n\t\n\t    Utils.prototype._processEnumerationColumn = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            enumeration = domain.enumeration || [];\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.hideFilter = true;\n\t        config.selector.source = _.map(enumeration, function (obj) {\n\t            return {\n\t                value: obj,\n\t                label: obj\n\t            }\n\t        });\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._processCodeColumn = function (c) {\n\t\n\t        return this._configTreeFromCodelist(c);\n\t        //return this._configDropdownFromCodelist(c);\n\t\n\t    };\n\t\n\t    /* processes for TIME FX column */\n\t\n\t    Utils.prototype._processDateColumn = function (c) {\n\t\n\t        var domain = c.domain || {},\n\t            period = domain.period,\n\t            timelist = domain.timeList;\n\t\n\t        if (period && period.from && period.to) {\n\t            //return this._configRangeFromPeriod(c);\n\t            return this._configTimeFromPeriod(c);\n\t            //return this._configDropdownFromPeriod(c);\n\t        }\n\t\n\t        if (timelist) {\n\t            //return this._configDropdownFromTimelist(c);\n\t            return this._configTreeFromTimelist(c);\n\t        }\n\t\n\t        log.warn(\"Impossible to find process for column \" + c.id);\n\t\n\t        return {};\n\t\n\t    };\n\t\n\t    Utils.prototype._processMonthColumn = function (c) {\n\t\n\t        return this._configTemporalColumn(c);\n\t    };\n\t\n\t    Utils.prototype._processYearColumn = function (c) {\n\t\n\t        return this._configTemporalColumn(c);\n\t    };\n\t\n\t    Utils.prototype._processTimeColumn = function (c) {\n\t\n\t        return this._configTemporalColumn(c);\n\t\n\t    };\n\t\n\t    /* processes for TEXT FX column */\n\t\n\t    Utils.prototype._processTextColumn = function (c) {\n\t\n\t        return this._configInput(c, {type: \"text\"});\n\t    };\n\t\n\t    Utils.prototype._processLabelColumn = function (c) {\n\t\n\t        return this._configInput(c, {type: \"text\"});\n\t    };\n\t\n\t    /* processes for OTHER FX column */\n\t\n\t    Utils.prototype._processNumberColumn = function (c) {\n\t\n\t        return this._configInput(c, {type: \"number\", output: \"time\"});\n\t    };\n\t\n\t    Utils.prototype._processPercentageColumn = function (c) {\n\t        log.warn(\"TODO process\");\n\t    };\n\t\n\t    Utils.prototype._processBooleanColumn = function (c) {\n\t        return this._configInput(c, {type: \"checkbox\"});\n\t\n\t    };\n\t\n\t    /* Common processes */\n\t\n\t    Utils.prototype._commonProcessColumn = function (c) {\n\t\n\t        var config = {\n\t            template: {},\n\t            format: {\n\t                dimension: c.id\n\t            }\n\t        };\n\t\n\t        if (c.title && c.title[this.lang.toUpperCase()]) {\n\t            config.template.title = c.title[this.lang.toUpperCase()];\n\t        }\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._configTreeFromCodelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.idCodeList) {\n\t            log.error(\"Impossible to find idCodeList\");\n\t        }\n\t\n\t        //configure code list\n\t        config.cl = {};\n\t        config.cl.uid = cl.idCodeList;\n\t        config.cl.version = cl.version;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.lazy = true;\n\t        config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromSource = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.codes) {\n\t            log.error(\"Impossible to find codes\");\n\t        }\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t            return {\n\t                value: obj.code,\n\t                label: obj.label[this.lang.toUpperCase()]\n\t            }\n\t        }, this));\n\t        config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t        config.selector.from = period.from;\n\t        config.selector.to = period.to;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.from = period.from;\n\t        config.selector.to = period.to;\n\t        config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromTimelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            timelist = domain.timeList || [],\n\t            format = this._getTimeFormat(timelist[0]);\n\t\n\t        //configure selector\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t        config.selector.source = _.map(timelist, _.bind(function (obj) {\n\t            return {\n\t                value: obj,\n\t                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t            }\n\t        }, this));\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTreeFromTimelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            timelist = domain.timeList || [],\n\t            format = this._getTimeFormat(timelist[0]);\n\t\n\t        //configure selector\n\t        config.selector = {};\n\t        config.selector.id = \"tree\";\n\t        config.selector.source = _.map(timelist, _.bind(function (obj) {\n\t            return {\n\t                value: obj,\n\t                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t            }\n\t        }, this));\n\t        config.selector.hideFilter = true;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromSource = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.codes) {\n\t            log.error(\"Impossible to find codes\");\n\t        }\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t            return {\n\t                value: obj.code,\n\t                label: obj.label[this.lang.toUpperCase()]\n\t            }\n\t        }, this));\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configDropdownFromCodelist = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            codes = domain.codes,\n\t            cl;\n\t\n\t        if (!Array.isArray(codes) || codes.length > 1) {\n\t            log.warn(\"Invalid domain.codes attributes\");\n\t        }\n\t\n\t        cl = codes[0];\n\t\n\t        if (!cl.idCodeList) {\n\t            log.error(\"Impossible to find idCodeList\");\n\t        }\n\t\n\t        //configure code list\n\t        config.cl = {};\n\t        config.cl.uid = cl.idCodeList;\n\t        config.cl.version = cl.version;\n\t\n\t        //configure selector\n\t        //html selector configuration\n\t        config.selector = {};\n\t        config.selector.id = \"dropdown\";\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configTimeFromPeriod = function (c) {\n\t\n\t        /* ~~~~~~ Selector time\n\t         var config = {},\n\t         domain = c.domain || {},\n\t         period = domain.period,\n\t         from = String(period.from),\n\t         to = String(period.to),\n\t         //from = String(period.from).substring(0, String(period.from).length - 2),\n\t         //to = String(period.to).substring(0, String(period.to).length - 2),\n\t         format = this._getTimeFormat(from);\n\t\n\t         //configure selector\n\t         config.selector = {\n\t         config: {}\n\t         };\n\t         config.selector.id = \"time\";\n\t         config.selector.config.minDate = new Moment(from, format);\n\t         config.selector.config.maxDate = new Moment(to, format);\n\t         config.selector.config.format = this._getTimeLabelFormat(from);\n\t\n\t         if (from.length < 5) {\n\t         config.selector.config.viewMode = \"years\";\n\t         }\n\t\n\t         config.format = {\n\t         output : \"time\"\n\t         };\n\t         */\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period,\n\t            from = String(period.from),\n\t            to = String(period.to);\n\t\n\t        //configure selector\n\t        config.selector = {\n\t            config: {}\n\t        };\n\t\n\t        config.selector.id = \"tree\";\n\t        config.selector.from = parseInt(from, 10);\n\t        config.selector.to = parseInt(to, 10);\n\t        config.selector.hideFilter = true;\n\t        config.format = {\n\t            output: \"time\"\n\t        };\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._configRangeFromPeriod = function (c) {\n\t\n\t        var config = {},\n\t            domain = c.domain || {},\n\t            period = domain.period;\n\t\n\t        //configure selector\n\t        config.selector = {\n\t            config: {}\n\t        };\n\t\n\t        config.selector.id = \"range\";\n\t        config.selector.config.min = period.from;\n\t        config.selector.config.max = period.to;\n\t        config.selector.config.type = \"double\";\n\t        config.selector.config.prettify_enabled = false;\n\t\n\t        return config;\n\t\n\t    };\n\t\n\t    Utils.prototype._configInput = function (c, o) {\n\t\n\t        var config = {\n\t            selector: {},\n\t            format: {\n\t                output: o.output || \"enumeration\"\n\t            }\n\t        };\n\t\n\t        config.selector.id = \"input\";\n\t        config.selector.type = o.type || \"text\";\n\t\n\t        return config;\n\t    };\n\t\n\t    Utils.prototype._configTemporalColumn = function (c) {\n\t\n\t        var domain = c.domain || {},\n\t            period = domain.period,\n\t            timelist = domain.timeList;\n\t\n\t        if (period && period.from && period.to) {\n\t            //return this._configRangeFromPeriod(c);\n\t            //return this._configTimeFromPeriod(c);\n\t            //return this._configDropdownFromPeriod(c);\n\t            return this._configTreeFromPeriod(c);\n\t        }\n\t\n\t        if (timelist) {\n\t            //return this._configDropdownFromTimelist(c);\n\t            return this._configTreeFromTimelist(c);\n\t        }\n\t\n\t        //Default set year range\n\t        log.warn(\"Column \" + c.id + \" set with default time period range.\");\n\t\n\t        c.domain = {\n\t            period: {\n\t                from: C.defaultPeriodFrom,\n\t                to: C.defaultPeriodTo\n\t            }\n\t        };\n\t\n\t        return this._configTimeFromPeriod(c);\n\t    };\n\t\n\t    Utils.prototype._getTimeFormat = function (s) {\n\t\n\t        var format;\n\t\n\t        switch (String(s).length) {\n\t            case 4 :\n\t                format = \"YYYY\";\n\t                break;\n\t            case 6:\n\t                format = \"YYYY MM\";\n\t                break;\n\t            case 8:\n\t                format = \"YYYY MM DD\";\n\t                break;\n\t            case 12:\n\t                format = \"YYYY MM DD hh mm\";\n\t                break;\n\t            case 14:\n\t                format = \"YYYY MM DD hh mm ss\";\n\t                break;\n\t            default:\n\t                log.warn(\"Impossible to find time format for: \" + format);\n\t        }\n\t\n\t        return format;\n\t\n\t    };\n\t\n\t    Utils.prototype._getTimeLabelFormat = function (s) {\n\t\n\t        if (this.timeLabelFormat) {\n\t            return this.timeLabelFormat;\n\t        }\n\t\n\t        var format;\n\t\n\t        switch (String(s).length) {\n\t            case 4 :\n\t                format = \"YYYY\";\n\t                break;\n\t            case 6:\n\t                format = \"L\";\n\t                break;\n\t            case 8:\n\t                format = \"L\";\n\t                break;\n\t            case 14:\n\t                format = \"lll\";\n\t                break;\n\t            default:\n\t                log.warn(\"Impossible to find time label format for: \" + format);\n\t        }\n\t\n\t        return format;\n\t\n\t    };\n\t\n\t    /*   /!* Revert Process *!/\n\t     /!**\n\t     * Extracts a blank selection from FENIX process\n\t     * default values\n\t     * @param {Object} filter\n\t     * @return {Object} filter configuration\n\t     *!/\n\t     Utils.prototype.revertProcess = function (filter) {\n\t\n\t     var configuration = {};\n\t\n\t     if (Array.isArray(filter)) {\n\t\n\t     _.each(filter, _.bind(function ( step ) {\n\t\n\t     var fn = \"_revert_\" + step.name;\n\t\n\t     if ( $.isFunction(this[fn]) && step.parameters) {\n\t     configuration[step.name] = _.extend( this[fn](step));\n\t     } else {\n\t     log.error(fn + \" is not a valid reverse function\");\n\t     }\n\t\n\t     }, this));\n\t     }\n\t\n\t     return configuration;\n\t\n\t     };\n\t\n\t     Utils.prototype._revert_filter = function (step) {\n\t     log.info(\"_revert_filter \" + JSON.stringify(step));\n\t\n\t     var self = this,\n\t     result = {},\n\t     parameters = step.parameters,\n\t     rows = parameters.rows,\n\t     columns = parameters.columns;\n\t\n\t     _.each(rows, function ( obj , key) {\n\t\n\t     if ( obj.time ) {\n\t     result[key] = self._revert_time_row(obj);\n\t     } else {\n\t     result[key] = self._revert_codes_row(obj);\n\t     }\n\t\n\t     });\n\t\n\t     return result;\n\t     };\n\t\n\t     Utils.prototype._revert_time_row = function ( step ) {\n\t\n\t     console.log(step)\n\t\n\t     };\n\t\n\t     Utils.prototype._revert_codes_row = function ( step ) {\n\t\n\t     console.log(step)\n\t\n\t\n\t     };\n\t\n\t     Utils.prototype._revert_group = function (step) {\n\t     log.info(\"_revert_group \" + JSON.stringify(step));\n\t\n\t\n\t     return;\n\t     };\n\t\n\t     Utils.prototype._revert_order = function (step) {\n\t     log.info(\"_revert_order \" + JSON.stringify(step));\n\t\n\t     return;\n\t     };\n\t     */\n\t    /* Validation */\n\t\n\t    Utils.prototype._isFenixResource = function (res) {\n\t\n\t        var valid = true,\n\t            errors = [],\n\t            resourceType = this.getNestedProperty(\"metadata.meContent.resourceRepresentationType\", res);\n\t\n\t        if (!res.hasOwnProperty(\"metadata\")) {\n\t            errors.push({code: ERR.INVALID_METADATA});\n\t            valid = false;\n\t        }\n\t\n\t        if (valid && !res.metadata.hasOwnProperty(\"dsd\")) {\n\t            errors.push({code: ERR.INVALID_DSD});\n\t            valid = false;\n\t        }\n\t\n\t        //NOT need field for FENIX GEOGRAPHIC RESOURCE\n\t        if (resourceType === \"dataset\" && valid && (!res.metadata.dsd.hasOwnProperty(\"columns\") || !Array.isArray(res.metadata.dsd.columns))) {\n\t            errors.push({code: ERR.INVALID_COLUMNS});\n\t        }\n\t\n\t        return errors.length > 0 ? errors : valid;\n\t    };\n\t\n\t    Utils.prototype._isFenixColumn = function (c) {\n\t\n\t        var valid = true,\n\t            errors = [];\n\t\n\t        if (!c.hasOwnProperty(\"dataType\")) {\n\t            errors.push({code: ERR.INVALID_COLUMN_DATATYPE});\n\t            valid = false;\n\t        }\n\t\n\t        return errors.length > 0 ? errors : valid;\n\t    };\n\t\n\t    Utils.prototype.getNestedProperty = function (path, obj) {\n\t\n\t        var obj = _.extend({}, obj),\n\t            arr = path.split(\".\");\n\t\n\t        while (arr.length && (obj = obj[arr.shift()]));\n\t\n\t        return obj;\n\t\n\t    };\n\t\n\t\n\t    Utils.prototype.assign = function (obj, prop, value) {\n\t        if (typeof prop === \"string\")\n\t            prop = prop.split(\".\");\n\t\n\t        if (prop.length > 1) {\n\t            var e = prop.shift();\n\t            this.assign(obj[e] =\n\t                    Object.prototype.toString.call(obj[e]) === \"[object Object]\"\n\t                        ? obj[e]\n\t                        : {},\n\t                prop,\n\t                value);\n\t        } else {\n\t            obj[prop[0]] = value;\n\t        }\n\t    };\n\t\n\t    Utils.prototype.getNestedProperty = function (path, obj) {\n\t\n\t        var obj = _.extend({}, obj),\n\t            arr = path.split(\".\");\n\t\n\t        while (arr.length && (obj = obj[arr.shift()]));\n\t\n\t        return obj;\n\t\n\t    };\n\t\n\t\n\t    return new Utils();\n\t\n\t\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function ( ) {\n\t\n\t    'use strict';\n\t\n\t    var prefix = \"\";\n\t\n\t    return {\n\t\n\t        //Utils\n\t        INVALID_FENIX_RESOURCE: prefix + \"invalid_fenix_resource\",\n\t        INVALID_METADATA: prefix + \"invalid_metadata\",\n\t        INVALID_DSD: prefix + \"invalid_dsd\",\n\t        INVALID_COLUMNS: prefix + \"invalid_dsd\",\n\t        INVALID_FENIX_COLUMN: prefix + \"invalid_fenix_column\",\n\t        INVALID_COLUMN_DATATYPE : prefix + \"invalid_column_datatype\",\n\t        UNKNOWN_FENIX_COLUMN_DATATYPE :prefix + \"unknown_fenix_column_datatype\",\n\t\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t\n\t    'use strict';\n\t\n\t    return {\n\t\n\t        forbiddenSubjects: [\"value\"],\n\t        exclude: [], //exclude id\n\t        common: {},\n\t        lang: 'EN',\n\t        defaultPeriodFrom: 1970,\n\t        defaultPeriodTo: 2017\n\t\n\t    }\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }\n/******/ ])});;\n\n\n/** WEBPACK FOOTER **\n ** fenix-ui-filter-utils.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 60209c9d664819b56ea1\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\ndefine([\n    '../config/errors',\n    '../config/config',\n    'jquery',\n    'underscore',\n    'loglevel',\n    'handlebars'\n], function (ERR, C, $, _, log, Handlebars) {\n\n    'use strict';\n\n    function Utils() {\n\n        return this;\n    }\n\n    //FENIX\n\n    Utils.prototype.compileFilter = function (id, values, items) {\n\n        _.extend(this, C);\n\n        var config = items[id] || {},\n            formatConfig = config.format || {},\n            template = formatConfig.template,\n            output = formatConfig.output || \"codes\";\n\n        if (template) {\n            return this.compileTemplate(id, values, config, template);\n        }\n\n        var key = formatConfig.dimension || id,\n            tmpl;\n\n        switch (output.toLocaleLowerCase()) {\n            case \"codes\" :\n\n                tmpl = '{ \"codes\":[{\"uid\": \"{{{uid}}}\", \"version\": \"{{version}}\", \"codes\": [{{{codes}}}] } ]}';\n                return this.compileTemplate(id, values, config, key, tmpl);\n\n                break;\n            case \"time\" :\n\n                return this.createTimeFilter(id, values, config, key);\n                break;\n\n            case \"enumeration\" :\n\n                return this.createEnumerationFilter(id, values, config, key);\n                break;\n            default :\n                log.warn(id + \" not included in the result set. Missing format configuration.\");\n                return {};\n        }\n\n    };\n\n    Utils.prototype.compileTemplate = function (id, values, config, key, template) {\n\n        /*\n         Priority\n         - values\n         - format configuration\n         - code list configuration\n         */\n\n        var model = _.extend(config.cl, config.format, {codes: '\"' + values.join('\",\"') + '\"'});\n\n        if (!template) {\n            log.error(\"Impossible to find '\" + id + \"' process template. Check your '\" + id + \"'.filter.process configuration.\")\n        }\n\n        if (!model.uid) {\n            log.error(\"Impossible to find '\" + id + \"' code list configuration for FENIX output format export.\");\n            return;\n        }\n\n        var tmpl = Handlebars.compile(template),\n            process = JSON.parse(tmpl(model)),\n            codes = process.codes;\n\n        //Remove empty version attributes\n        _.each(codes, function (obj) {\n            if (!obj.version) {\n                delete obj.version;\n            }\n        });\n\n        return process;\n\n    };\n\n    Utils.prototype.createTimeFilter = function (id, values, config, key) {\n\n        var time = [],\n            valuesAreObject = typeof values[0] === 'object',\n            v;\n\n        if (valuesAreObject) {\n\n            var from = _.findWhere(values, {parent: \"from\"}) || {},\n                to = _.findWhere(values, {parent: \"to\"}) || {},\n                couple = {from: null, to: null};\n\n            couple.from = from.value;\n            couple.to = to.value;\n\n            time.push($.extend({}, couple));\n\n        } else {\n\n            v = values.map(function (a) {\n                return parseInt(a, 10);\n            }).sort(function (a, b) {\n                return a - b;\n            });\n\n\n            _.each(v, function (i) {\n                time.push({from: i, to: i});\n            });\n\n        }\n\n        return {time: time};\n    };\n\n    Utils.prototype.createEnumerationFilter = function (id, values, config, key) {\n\n        return {enumeration: values};\n\n    };\n\n    Utils.prototype.cleanArray = function (actual) {\n        var newArray = [];\n        for (var i = 0; i < actual.length; i++) {\n            if (actual[i]) {\n                newArray.push(actual[i]);\n            }\n        }\n        return newArray;\n    };\n\n    /* FILTER UTILS */\n\n    /**\n     * Creates a FENIX filter configuration from a\n     * FENIX resource\n     * @param {Object} o\n     * @return {Object} filter configuration\n     */\n    Utils.prototype.createConfiguration = function (o) {\n        log.info(\"Create filter configuration from:\");\n        log.info(o);\n\n        _.extend(this, C, o);\n\n        var configuration = {};\n\n        if (this._isFenixResource(o.model) === true) {\n            log.info(\"Valid resource\");\n\n            _.each(o.model.metadata.dsd.columns, _.bind(function (c) {\n\n                if (!_.contains(this.forbiddenSubjects, c.subject) && !_.contains(this.exclude, c.id) && !c.id.endsWith(\"_\" + this.lang.toUpperCase())) {\n                    configuration[c.id] = _.extend({}, this._processFxColumn(c), this.common);\n                } else {\n                    log.warn(c.id + \" was excluded. [id: \" + c.id + \", subject: \" + c.subject + \"]\");\n                }\n\n            }, this));\n\n        } else {\n            log.error(ERR.INVALID_FENIX_RESOURCE);\n        }\n\n        return configuration;\n    };\n\n    /**\n     * Merges a FENIX filter configuration with\n     * default values\n     * @param {Object} config\n     * @param {Object} sync\n     * @return {Object} filter configuration\n     */\n    Utils.prototype.mergeConfigurations = function (config, s) {\n\n        var sync = s.toolbar ? s.toolbar : s;\n\n        if (sync) {\n\n            var values = sync.values;\n\n            _.each(values, _.bind(function (obj, key) {\n\n                if (config.hasOwnProperty(key)) {\n                    config[key].selector.default = values[key];\n                }\n\n            }, this));\n        }\n\n        return config;\n\n    };\n\n    // private fns\n\n    Utils.prototype._processFxColumn = function (c) {\n\n        var conf = {};\n\n        if (this._isFenixColumn(c) === true) {\n            log.info(\"Valid column with dataType: \" + c.dataType.toLowerCase() + \" [column.id = \" + c.id + \" ]\");\n\n            switch (c.dataType.toLowerCase()) {\n                case \"customcode\" :\n                    conf = this._processCustomCodeColumn(c);\n                    break;\n                case \"enumeration\" :\n                    conf = this._processEnumerationColumn(c);\n                    break;\n                case \"code\" :\n                    conf = this._processCodeColumn(c);\n                    break;\n                case \"date\" :\n                    conf = this._processDateColumn(c);\n                    break;\n                case \"month\" :\n                    conf = this._processMonthColumn(c);\n                    break;\n                case \"year\" :\n                    conf = this._processYearColumn(c);\n                    break;\n                case \"time\" :\n                    conf = this._processTimeColumn(c);\n                    break;\n                case \"text\" :\n                    conf = this._processTextColumn(c);\n                    break;\n                case \"label\" :\n                    conf = this._processLabelColumn(c);\n                    break;\n                case \"number\" :\n                    conf = this._processNumberColumn(c);\n                    break;\n                case \"percentage\" :\n                    conf = this._processPercentageColumn(c);\n                    break;\n                case \"bool\" :\n                    conf = this._processBooleanColumn(c);\n                    break;\n                default:\n                    log.error(ERR.UNKNOWN_FENIX_COLUMN_DATATYPE, c.dataType.toLowerCase());\n\n            }\n        } else {\n            log.error(ERR.INVALID_FENIX_COLUMN);\n        }\n\n        return _.extend({}, conf, this._commonProcessColumn(c));\n    };\n\n    /* processes for CODE FX column */\n\n    Utils.prototype._processCustomCodeColumn = function (c) {\n        return this._configTreeFromSource(c);\n        //return this._configDropdownFromSource(c);\n    };\n\n    Utils.prototype._processEnumerationColumn = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            enumeration = domain.enumeration || [];\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.hideFilter = true;\n        config.selector.source = _.map(enumeration, function (obj) {\n            return {\n                value: obj,\n                label: obj\n            }\n        });\n\n        return config;\n    };\n\n    Utils.prototype._processCodeColumn = function (c) {\n\n        return this._configTreeFromCodelist(c);\n        //return this._configDropdownFromCodelist(c);\n\n    };\n\n    /* processes for TIME FX column */\n\n    Utils.prototype._processDateColumn = function (c) {\n\n        var domain = c.domain || {},\n            period = domain.period,\n            timelist = domain.timeList;\n\n        if (period && period.from && period.to) {\n            //return this._configRangeFromPeriod(c);\n            return this._configTimeFromPeriod(c);\n            //return this._configDropdownFromPeriod(c);\n        }\n\n        if (timelist) {\n            //return this._configDropdownFromTimelist(c);\n            return this._configTreeFromTimelist(c);\n        }\n\n        log.warn(\"Impossible to find process for column \" + c.id);\n\n        return {};\n\n    };\n\n    Utils.prototype._processMonthColumn = function (c) {\n\n        return this._configTemporalColumn(c);\n    };\n\n    Utils.prototype._processYearColumn = function (c) {\n\n        return this._configTemporalColumn(c);\n    };\n\n    Utils.prototype._processTimeColumn = function (c) {\n\n        return this._configTemporalColumn(c);\n\n    };\n\n    /* processes for TEXT FX column */\n\n    Utils.prototype._processTextColumn = function (c) {\n\n        return this._configInput(c, {type: \"text\"});\n    };\n\n    Utils.prototype._processLabelColumn = function (c) {\n\n        return this._configInput(c, {type: \"text\"});\n    };\n\n    /* processes for OTHER FX column */\n\n    Utils.prototype._processNumberColumn = function (c) {\n\n        return this._configInput(c, {type: \"number\", output: \"time\"});\n    };\n\n    Utils.prototype._processPercentageColumn = function (c) {\n        log.warn(\"TODO process\");\n    };\n\n    Utils.prototype._processBooleanColumn = function (c) {\n        return this._configInput(c, {type: \"checkbox\"});\n\n    };\n\n    /* Common processes */\n\n    Utils.prototype._commonProcessColumn = function (c) {\n\n        var config = {\n            template: {},\n            format: {\n                dimension: c.id\n            }\n        };\n\n        if (c.title && c.title[this.lang.toUpperCase()]) {\n            config.template.title = c.title[this.lang.toUpperCase()];\n        }\n\n        return config;\n    };\n\n    Utils.prototype._configTreeFromCodelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.idCodeList) {\n            log.error(\"Impossible to find idCodeList\");\n        }\n\n        //configure code list\n        config.cl = {};\n        config.cl.uid = cl.idCodeList;\n        config.cl.version = cl.version;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.lazy = true;\n        config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromSource = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.codes) {\n            log.error(\"Impossible to find codes\");\n        }\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n            return {\n                value: obj.code,\n                label: obj.label[this.lang.toUpperCase()]\n            }\n        }, this));\n        config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n        config.selector.from = period.from;\n        config.selector.to = period.to;\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.from = period.from;\n        config.selector.to = period.to;\n        config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromTimelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            timelist = domain.timeList || [],\n            format = this._getTimeFormat(timelist[0]);\n\n        //configure selector\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n        config.selector.source = _.map(timelist, _.bind(function (obj) {\n            return {\n                value: obj,\n                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n            }\n        }, this));\n\n        return config;\n\n    };\n\n    Utils.prototype._configTreeFromTimelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            timelist = domain.timeList || [],\n            format = this._getTimeFormat(timelist[0]);\n\n        //configure selector\n        config.selector = {};\n        config.selector.id = \"tree\";\n        config.selector.source = _.map(timelist, _.bind(function (obj) {\n            return {\n                value: obj,\n                label: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n            }\n        }, this));\n        config.selector.hideFilter = true;\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromSource = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.codes) {\n            log.error(\"Impossible to find codes\");\n        }\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n        config.selector.source = _.map(cl.codes, _.bind(function (obj) {\n            return {\n                value: obj.code,\n                label: obj.label[this.lang.toUpperCase()]\n            }\n        }, this));\n\n        return config;\n\n    };\n\n    Utils.prototype._configDropdownFromCodelist = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            codes = domain.codes,\n            cl;\n\n        if (!Array.isArray(codes) || codes.length > 1) {\n            log.warn(\"Invalid domain.codes attributes\");\n        }\n\n        cl = codes[0];\n\n        if (!cl.idCodeList) {\n            log.error(\"Impossible to find idCodeList\");\n        }\n\n        //configure code list\n        config.cl = {};\n        config.cl.uid = cl.idCodeList;\n        config.cl.version = cl.version;\n\n        //configure selector\n        //html selector configuration\n        config.selector = {};\n        config.selector.id = \"dropdown\";\n\n        return config;\n\n    };\n\n    Utils.prototype._configTimeFromPeriod = function (c) {\n\n        /* ~~~~~~ Selector time\n         var config = {},\n         domain = c.domain || {},\n         period = domain.period,\n         from = String(period.from),\n         to = String(period.to),\n         //from = String(period.from).substring(0, String(period.from).length - 2),\n         //to = String(period.to).substring(0, String(period.to).length - 2),\n         format = this._getTimeFormat(from);\n\n         //configure selector\n         config.selector = {\n         config: {}\n         };\n         config.selector.id = \"time\";\n         config.selector.config.minDate = new Moment(from, format);\n         config.selector.config.maxDate = new Moment(to, format);\n         config.selector.config.format = this._getTimeLabelFormat(from);\n\n         if (from.length < 5) {\n         config.selector.config.viewMode = \"years\";\n         }\n\n         config.format = {\n         output : \"time\"\n         };\n         */\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period,\n            from = String(period.from),\n            to = String(period.to);\n\n        //configure selector\n        config.selector = {\n            config: {}\n        };\n\n        config.selector.id = \"tree\";\n        config.selector.from = parseInt(from, 10);\n        config.selector.to = parseInt(to, 10);\n        config.selector.hideFilter = true;\n        config.format = {\n            output: \"time\"\n        };\n\n        return config;\n    };\n\n    Utils.prototype._configRangeFromPeriod = function (c) {\n\n        var config = {},\n            domain = c.domain || {},\n            period = domain.period;\n\n        //configure selector\n        config.selector = {\n            config: {}\n        };\n\n        config.selector.id = \"range\";\n        config.selector.config.min = period.from;\n        config.selector.config.max = period.to;\n        config.selector.config.type = \"double\";\n        config.selector.config.prettify_enabled = false;\n\n        return config;\n\n    };\n\n    Utils.prototype._configInput = function (c, o) {\n\n        var config = {\n            selector: {},\n            format: {\n                output: o.output || \"enumeration\"\n            }\n        };\n\n        config.selector.id = \"input\";\n        config.selector.type = o.type || \"text\";\n\n        return config;\n    };\n\n    Utils.prototype._configTemporalColumn = function (c) {\n\n        var domain = c.domain || {},\n            period = domain.period,\n            timelist = domain.timeList;\n\n        if (period && period.from && period.to) {\n            //return this._configRangeFromPeriod(c);\n            //return this._configTimeFromPeriod(c);\n            //return this._configDropdownFromPeriod(c);\n            return this._configTreeFromPeriod(c);\n        }\n\n        if (timelist) {\n            //return this._configDropdownFromTimelist(c);\n            return this._configTreeFromTimelist(c);\n        }\n\n        //Default set year range\n        log.warn(\"Column \" + c.id + \" set with default time period range.\");\n\n        c.domain = {\n            period: {\n                from: C.defaultPeriodFrom,\n                to: C.defaultPeriodTo\n            }\n        };\n\n        return this._configTimeFromPeriod(c);\n    };\n\n    Utils.prototype._getTimeFormat = function (s) {\n\n        var format;\n\n        switch (String(s).length) {\n            case 4 :\n                format = \"YYYY\";\n                break;\n            case 6:\n                format = \"YYYY MM\";\n                break;\n            case 8:\n                format = \"YYYY MM DD\";\n                break;\n            case 12:\n                format = \"YYYY MM DD hh mm\";\n                break;\n            case 14:\n                format = \"YYYY MM DD hh mm ss\";\n                break;\n            default:\n                log.warn(\"Impossible to find time format for: \" + format);\n        }\n\n        return format;\n\n    };\n\n    Utils.prototype._getTimeLabelFormat = function (s) {\n\n        if (this.timeLabelFormat) {\n            return this.timeLabelFormat;\n        }\n\n        var format;\n\n        switch (String(s).length) {\n            case 4 :\n                format = \"YYYY\";\n                break;\n            case 6:\n                format = \"L\";\n                break;\n            case 8:\n                format = \"L\";\n                break;\n            case 14:\n                format = \"lll\";\n                break;\n            default:\n                log.warn(\"Impossible to find time label format for: \" + format);\n        }\n\n        return format;\n\n    };\n\n    /*   /!* Revert Process *!/\n     /!**\n     * Extracts a blank selection from FENIX process\n     * default values\n     * @param {Object} filter\n     * @return {Object} filter configuration\n     *!/\n     Utils.prototype.revertProcess = function (filter) {\n\n     var configuration = {};\n\n     if (Array.isArray(filter)) {\n\n     _.each(filter, _.bind(function ( step ) {\n\n     var fn = \"_revert_\" + step.name;\n\n     if ( $.isFunction(this[fn]) && step.parameters) {\n     configuration[step.name] = _.extend( this[fn](step));\n     } else {\n     log.error(fn + \" is not a valid reverse function\");\n     }\n\n     }, this));\n     }\n\n     return configuration;\n\n     };\n\n     Utils.prototype._revert_filter = function (step) {\n     log.info(\"_revert_filter \" + JSON.stringify(step));\n\n     var self = this,\n     result = {},\n     parameters = step.parameters,\n     rows = parameters.rows,\n     columns = parameters.columns;\n\n     _.each(rows, function ( obj , key) {\n\n     if ( obj.time ) {\n     result[key] = self._revert_time_row(obj);\n     } else {\n     result[key] = self._revert_codes_row(obj);\n     }\n\n     });\n\n     return result;\n     };\n\n     Utils.prototype._revert_time_row = function ( step ) {\n\n     console.log(step)\n\n     };\n\n     Utils.prototype._revert_codes_row = function ( step ) {\n\n     console.log(step)\n\n\n     };\n\n     Utils.prototype._revert_group = function (step) {\n     log.info(\"_revert_group \" + JSON.stringify(step));\n\n\n     return;\n     };\n\n     Utils.prototype._revert_order = function (step) {\n     log.info(\"_revert_order \" + JSON.stringify(step));\n\n     return;\n     };\n     */\n    /* Validation */\n\n    Utils.prototype._isFenixResource = function (res) {\n\n        var valid = true,\n            errors = [],\n            resourceType = this.getNestedProperty(\"metadata.meContent.resourceRepresentationType\", res);\n\n        if (!res.hasOwnProperty(\"metadata\")) {\n            errors.push({code: ERR.INVALID_METADATA});\n            valid = false;\n        }\n\n        if (valid && !res.metadata.hasOwnProperty(\"dsd\")) {\n            errors.push({code: ERR.INVALID_DSD});\n            valid = false;\n        }\n\n        //NOT need field for FENIX GEOGRAPHIC RESOURCE\n        if (resourceType === \"dataset\" && valid && (!res.metadata.dsd.hasOwnProperty(\"columns\") || !Array.isArray(res.metadata.dsd.columns))) {\n            errors.push({code: ERR.INVALID_COLUMNS});\n        }\n\n        return errors.length > 0 ? errors : valid;\n    };\n\n    Utils.prototype._isFenixColumn = function (c) {\n\n        var valid = true,\n            errors = [];\n\n        if (!c.hasOwnProperty(\"dataType\")) {\n            errors.push({code: ERR.INVALID_COLUMN_DATATYPE});\n            valid = false;\n        }\n\n        return errors.length > 0 ? errors : valid;\n    };\n\n    Utils.prototype.getNestedProperty = function (path, obj) {\n\n        var obj = _.extend({}, obj),\n            arr = path.split(\".\");\n\n        while (arr.length && (obj = obj[arr.shift()]));\n\n        return obj;\n\n    };\n\n\n    Utils.prototype.assign = function (obj, prop, value) {\n        if (typeof prop === \"string\")\n            prop = prop.split(\".\");\n\n        if (prop.length > 1) {\n            var e = prop.shift();\n            this.assign(obj[e] =\n                    Object.prototype.toString.call(obj[e]) === \"[object Object]\"\n                        ? obj[e]\n                        : {},\n                prop,\n                value);\n        } else {\n            obj[prop[0]] = value;\n        }\n    };\n\n    Utils.prototype.getNestedProperty = function (path, obj) {\n\n        var obj = _.extend({}, obj),\n            arr = path.split(\".\");\n\n        while (arr.length && (obj = obj[arr.shift()]));\n\n        return obj;\n\n    };\n\n\n    return new Utils();\n\n\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/index.js\n ** module id = 1\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\n\ndefine(function ( ) {\n\n    'use strict';\n\n    var prefix = \"\";\n\n    return {\n\n        //Utils\n        INVALID_FENIX_RESOURCE: prefix + \"invalid_fenix_resource\",\n        INVALID_METADATA: prefix + \"invalid_metadata\",\n        INVALID_DSD: prefix + \"invalid_dsd\",\n        INVALID_COLUMNS: prefix + \"invalid_dsd\",\n        INVALID_FENIX_COLUMN: prefix + \"invalid_fenix_column\",\n        INVALID_COLUMN_DATATYPE : prefix + \"invalid_column_datatype\",\n        UNKNOWN_FENIX_COLUMN_DATATYPE :prefix + \"unknown_fenix_column_datatype\",\n\n    };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/errors.js\n ** module id = 2\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\n\ndefine(function () {\n\n    'use strict';\n\n    return {\n\n        forbiddenSubjects: [\"value\"],\n        exclude: [], //exclude id\n        common: {},\n        lang: 'EN',\n        defaultPeriodFrom: 1970,\n        defaultPeriodTo: 2017\n\n    }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/config.js\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"loglevel\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"handlebars\"\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}