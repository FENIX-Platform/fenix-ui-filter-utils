{"version":3,"sources":["webpack:///fenix-ui-filter-utils.min.js","webpack:///webpack/bootstrap 4d108aa7d4b0457b1794","webpack:///./src/js/index.js","webpack:///./src/config/errors.js","webpack:///./src/config/config.js","webpack:///external \"jquery\"","webpack:///external \"underscore\"","webpack:///external \"loglevel\"","webpack:///external \"handlebars\""],"names":["define","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","ERR","C","$","_","log","Handlebars","Utils","this","prototype","compileFilter","values","items","extend","config","formatConfig","format","template","output","compileTemplate","tmpl","key","dimension","toLocaleLowerCase","createTimeFilter","createEnumerationFilter","warn","model","cl","codes","join","error","uid","compile","process","JSON","parse","each","obj","version","v","time","valuesAreObject","from","findWhere","parent","to","couple","value","push","map","a","parseInt","sort","b","i","enumeration","cleanArray","actual","newArray","length","createConfiguration","o","info","configuration","_isFenixResource","metadata","dsd","columns","bind","contains","forbiddenSubjects","subject","exclude","endsWith","lang","toUpperCase","_processFxColumn","common","INVALID_FENIX_RESOURCE","mergeConfigurations","s","sync","toolbar","hasOwnProperty","selector","conf","_isFenixColumn","dataType","toLowerCase","_processCustomCodeColumn","_processEnumerationColumn","_processCodeColumn","_processDateColumn","_processMonthColumn","_processYearColumn","_processTimeColumn","_processTextColumn","_processLabelColumn","_processNumberColumn","_processPercentageColumn","_processBooleanColumn","UNKNOWN_FENIX_COLUMN_DATATYPE","INVALID_FENIX_COLUMN","_commonProcessColumn","_configTreeFromSource","domain","hideFilter","source","label","_configTreeFromCodelist","period","timelist","timeList","_configTimeFromPeriod","_configTreeFromTimelist","_configTemporalColumn","_configInput","type","title","Array","isArray","idCodeList","lazy","code","_configDropdownFromPeriod","_configTreeFromPeriod","_configDropdownFromTimelist","_getTimeFormat","Moment","_getTimeLabelFormat","_configDropdownFromSource","_configDropdownFromCodelist","String","_configRangeFromPeriod","min","max","prettify_enabled","defaultPeriodFrom","defaultPeriodTo","timeLabelFormat","res","valid","errors","resourceType","getNestedProperty","INVALID_METADATA","INVALID_DSD","INVALID_COLUMNS","INVALID_COLUMN_DATATYPE","apply","undefined","prefix"],"mappings":"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","file":"fenix-ui-filter-utils.min.js","sourcesContent":["define([\"jquery\",\"underscore\",\"loglevel\",\"handlebars\"], function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t\tvar define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t\t__webpack_require__(2),\n\t\t__webpack_require__(3),\n\t\t__webpack_require__(4),\n\t\t__webpack_require__(5),\n\t\t__webpack_require__(6),\n\t\t__webpack_require__(7)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function (ERR, C, $, _, log, Handlebars) {\n\t\n\t\t'use strict';\n\t\n\t\tfunction Utils() {\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\t//FENIX\n\t\n\t\tUtils.prototype.compileFilter = function (id, values, items) {\n\t\n\t\t\t$.extend(true, this, C);\n\t\n\t\t\tvar config = items[id] || {},\n\t\t\t\tformatConfig = config.format || {},\n\t\t\t\ttemplate = formatConfig.template,\n\t\t\t\toutput = formatConfig.output || \"codes\";\n\t\n\t\t\tif (template) {\n\t\t\t\treturn this.compileTemplate(id, values, config, template);\n\t\t\t}\n\t\n\t\t\tvar key = formatConfig.dimension || id,\n\t\t\t\ttmpl;\n\t\n\t\t\tswitch (output.toLocaleLowerCase()) {\n\t\t\t\tcase \"codes\" :\n\t\n\t\t\t\t\ttmpl = '{ \"codes\":[{\"uid\": \"{{{uid}}}\", \"version\": \"{{version}}\", \"codes\": [{{{codes}}}] } ]}';\n\t\t\t\t\treturn this.compileTemplate(id, values, config, key, tmpl);\n\t\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"time\" :\n\t\n\t\t\t\t\treturn this.createTimeFilter(id, values, config, key);\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase \"enumeration\" :\n\t\n\t\t\t\t\treturn this.createEnumerationFilter(id, values, config, key);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\tlog.warn(id + \" not included in the result set. Missing format configuration.\");\n\t\t\t\t\treturn {};\n\t\t\t}\n\t\n\t\t};\n\t\n\t\tUtils.prototype.compileTemplate = function (id, values, config, key, template) {\n\t\n\t\t\t/*\n\t\t\t Priority\n\t\t\t - values\n\t\t\t - format configuration\n\t\t\t - code list configuration\n\t\t\t */\n\t\n\t\t\tvar model = $.extend(true, config.cl, config.format, {codes: '\"' + values.join('\",\"') + '\"'});\n\t\n\t\t\tif (!template) {\n\t\t\t\tlog.error(\"Impossible to find '\" + id + \"' process template. Check your '\" + id + \"'.filter.process configuration.\")\n\t\t\t}\n\t\n\t\t\tif (!model.uid) {\n\t\t\t\tlog.error(\"Impossible to find '\" + id + \"' code list configuration for FENIX output format export.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar tmpl = Handlebars.compile(template),\n\t\t\t\tprocess = JSON.parse(tmpl(model)),\n\t\t\t\tcodes = process.codes;\n\t\n\t\t\t//Remove empty version attributes\n\t\t\t_.each(codes, function (obj) {\n\t\t\t\tif (!obj.version) {\n\t\t\t\t\tdelete obj.version;\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\treturn process;\n\t\n\t\t};\n\t\n\t\tUtils.prototype.createTimeFilter = function (id, values, config, key) {\n\t\n\t\t\tvar time = [],\n\t\t\t\tvaluesAreObject = typeof values[0] === 'object',\n\t\t\t\tv;\n\t\n\t\t\tif (valuesAreObject) {\n\t\n\t\t\t\tvar from = _.findWhere(values, {parent: \"from\"}) || {},\n\t\t\t\t\tto = _.findWhere(values, {parent: \"to\"}) || {},\n\t\t\t\t\tcouple = {from: null, to: null};\n\t\n\t\t\t\tcouple.from = from.value;\n\t\t\t\tcouple.to = to.value;\n\t\n\t\t\t\ttime.push($.extend({}, couple));\n\t\n\t\t\t} else {\n\t\n\t\t\t\tv = values.map(function (a) {\n\t\t\t\t\treturn parseInt(a, 10);\n\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\treturn a - b;\n\t\t\t\t});\n\t\n\t\n\t\t\t\t_.each(v, function (i) {\n\t\t\t\t\ttime.push({from: i, to: i});\n\t\t\t\t});\n\t\n\t\t\t}\n\t\n\t\t\treturn {time: time};\n\t\t};\n\t\n\t\tUtils.prototype.createEnumerationFilter = function (id, values, config, key) {\n\t\n\t\t\treturn {enumeration: values};\n\t\n\t\t};\n\t\n\t\tUtils.prototype.cleanArray = function (actual) {\n\t\t\tvar newArray = [];\n\t\t\tfor (var i = 0; i < actual.length; i++) {\n\t\t\t\tif (actual[i]) {\n\t\t\t\t\tnewArray.push(actual[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newArray;\n\t\t};\n\t\n\t\t/* FILTER UTILS */\n\t\n\t\t/**\n\t\t * Creates a FENIX filter configuration from a\n\t\t * FENIX resource\n\t\t * @param {Object} o\n\t\t * @return {Object} filter configuration\n\t\t */\n\t\tUtils.prototype.createConfiguration = function (o) {\n\t\t\tlog.info(\"Create filter configuration from:\");\n\t\t\tlog.info(o);\n\t\n\t\t\t$.extend(true, this, o);\n\t\n\t\t\tvar configuration = {};\n\t\n\t\t\tif (this._isFenixResource(o.model) === true) {\n\t\t\t\tlog.info(\"Valid resource\");\n\t\n\t\t\t\t_.each(o.model.metadata.dsd.columns, _.bind(function (c) {\n\t\n\t\t\t\t\tif (!_.contains(this.forbiddenSubjects, c.subject) && !_.contains(this.exclude, c.id) && !c.id.endsWith(\"_\" + this.lang.toUpperCase())) {\n\t\t\t\t\t\tconfiguration[c.id] = $.extend(true, {}, this._processFxColumn(c), this.common);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlog.warn(c.id + \" was excluded. [id: \" + c.id + \", subject: \" + c.subject + \"]\");\n\t\t\t\t\t}\n\t\n\t\t\t\t}, this));\n\t\n\t\t\t} else {\n\t\t\t\tlog.error(ERR.INVALID_FENIX_RESOURCE);\n\t\t\t}\n\t\n\t\t\treturn configuration;\n\t\t};\n\t\n\t\t/**\n\t\t * Merges a FENIX filter configuration with\n\t\t * default values\n\t\t * @param {Object} config\n\t\t * @param {Object} sync\n\t\t * @return {Object} filter configuration\n\t\t */\n\t\tUtils.prototype.mergeConfigurations = function (config, s) {\n\t\n\t\t\tvar sync = s.toolbar ? s.toolbar : s;\n\t\n\t\t\tif (sync) {\n\t\n\t\t\t\tvar values = sync.values;\n\t\n\t\t\t\t_.each(values, _.bind(function (obj, key) {\n\t\n\t\t\t\t\tif (config.hasOwnProperty(key)) {\n\t\t\t\t\t\tconfig[key].selector.default = values[key];\n\t\t\t\t\t}\n\t\n\t\t\t\t}, this));\n\t\t\t}\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\t// private fns\n\t\n\t\tUtils.prototype._processFxColumn = function (c) {\n\t\n\t\t\tvar conf = {};\n\t\n\t\t\tif (this._isFenixColumn(c) === true) {\n\t\t\t\tlog.info(\"Valid column with dataType: \" + c.dataType.toLowerCase() + \" [column.id = \" + c.id + \" ]\");\n\t\n\t\t\t\tswitch (c.dataType.toLowerCase()) {\n\t\t\t\t\tcase \"customcode\" :\n\t\t\t\t\t\tconf = this._processCustomCodeColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"enumeration\" :\n\t\t\t\t\t\tconf = this._processEnumerationColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"code\" :\n\t\t\t\t\t\tconf = this._processCodeColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"date\" :\n\t\t\t\t\t\tconf = this._processDateColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"month\" :\n\t\t\t\t\t\tconf = this._processMonthColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"year\" :\n\t\t\t\t\t\tconf = this._processYearColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"time\" :\n\t\t\t\t\t\tconf = this._processTimeColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"text\" :\n\t\t\t\t\t\tconf = this._processTextColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"label\" :\n\t\t\t\t\t\tconf = this._processLabelColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"number\" :\n\t\t\t\t\t\tconf = this._processNumberColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"percentage\" :\n\t\t\t\t\t\tconf = this._processPercentageColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"bool\" :\n\t\t\t\t\t\tconf = this._processBooleanColumn(c);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tlog.error(ERR.UNKNOWN_FENIX_COLUMN_DATATYPE, c.dataType.toLowerCase());\n\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlog.error(ERR.INVALID_FENIX_COLUMN);\n\t\t\t}\n\t\n\t\t\treturn $.extend(true, {}, conf, this._commonProcessColumn(c));\n\t\t};\n\t\n\t\t/* processes for CODE FX column */\n\t\n\t\tUtils.prototype._processCustomCodeColumn = function (c) {\n\t\t\treturn this._configTreeFromSource(c);\n\t\t\t//return this._configDropdownFromSource(c);\n\t\t};\n\t\n\t\tUtils.prototype._processEnumerationColumn = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tenumeration = domain.enumeration || [];\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"tree\";\n\t\t\tconfig.selector.hideFilter = true;\n\t\t\tconfig.selector.source = _.map(enumeration, function (obj) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: obj,\n\t\t\t\t\tlabel: obj\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\treturn config;\n\t\t};\n\t\n\t\tUtils.prototype._processCodeColumn = function (c) {\n\t\n\t\t\treturn this._configTreeFromCodelist(c);\n\t\t\t//return this._configDropdownFromCodelist(c);\n\t\n\t\t};\n\t\n\t\t/* processes for TIME FX column */\n\t\n\t\tUtils.prototype._processDateColumn = function (c) {\n\t\n\t\t\tvar domain = c.domain || {},\n\t\t\t\tperiod = domain.period,\n\t\t\t\ttimelist = domain.timeList;\n\t\n\t\t\tif (period && period.from && period.to) {\n\t\t\t\t//return this._configRangeFromPeriod(c);\n\t\t\t\treturn this._configTimeFromPeriod(c);\n\t\t\t\t//return this._configDropdownFromPeriod(c);\n\t\t\t}\n\t\n\t\t\tif (timelist) {\n\t\t\t\t//return this._configDropdownFromTimelist(c);\n\t\t\t\treturn this._configTreeFromTimelist(c);\n\t\t\t}\n\t\n\t\t\tlog.warn(\"Impossible to find process for column \" + c.id);\n\t\n\t\t\treturn {};\n\t\n\t\t};\n\t\n\t\tUtils.prototype._processMonthColumn = function (c) {\n\t\n\t\t\treturn this._configTemporalColumn(c);\n\t\t};\n\t\n\t\tUtils.prototype._processYearColumn = function (c) {\n\t\n\t\t\treturn this._configTemporalColumn(c);\n\t\t};\n\t\n\t\tUtils.prototype._processTimeColumn = function (c) {\n\t\n\t\t\treturn this._configTemporalColumn(c);\n\t\n\t\t};\n\t\n\t\t/* processes for TEXT FX column */\n\t\n\t\tUtils.prototype._processTextColumn = function (c) {\n\t\n\t\t\treturn this._configInput(c, {type: \"text\"});\n\t\t};\n\t\n\t\tUtils.prototype._processLabelColumn = function (c) {\n\t\n\t\t\treturn this._configInput(c, {type: \"text\"});\n\t\t};\n\t\n\t\t/* processes for OTHER FX column */\n\t\n\t\tUtils.prototype._processNumberColumn = function (c) {\n\t\n\t\t\treturn this._configInput(c, {type: \"number\", output: \"time\"});\n\t\t};\n\t\n\t\tUtils.prototype._processPercentageColumn = function (c) {\n\t\t\tlog.warn(\"TODO process\");\n\t\t};\n\t\n\t\tUtils.prototype._processBooleanColumn = function (c) {\n\t\t\treturn this._configInput(c, {type: \"checkbox\"});\n\t\n\t\t};\n\t\n\t\t/* Common processes */\n\t\n\t\tUtils.prototype._commonProcessColumn = function (c) {\n\t\n\t\t\tvar config = {\n\t\t\t\ttemplate: {},\n\t\t\t\tformat: {\n\t\t\t\t\tdimension: c.id\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tif (c.title && c.title[this.lang.toUpperCase()]) {\n\t\t\t\tconfig.template.title = c.title[this.lang.toUpperCase()];\n\t\t\t}\n\t\n\t\t\treturn config;\n\t\t};\n\t\n\t\tUtils.prototype._configTreeFromCodelist = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tcodes = domain.codes,\n\t\t\t\tcl;\n\t\n\t\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t\t}\n\t\n\t\t\tcl = codes[0];\n\t\n\t\t\tif (!cl.idCodeList) {\n\t\t\t\tlog.error(\"Impossible to find idCodeList\");\n\t\t\t}\n\t\n\t\t\t//configure code list\n\t\t\tconfig.cl = {};\n\t\t\tconfig.cl.uid = cl.idCodeList;\n\t\t\tconfig.cl.version = cl.version;\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"tree\";\n\t\t\tconfig.selector.lazy = true;\n\t\t\tconfig.selector.hideFilter = true;\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configTreeFromSource = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tcodes = domain.codes,\n\t\t\t\tcl;\n\t\n\t\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t\t}\n\t\n\t\t\tcl = codes[0];\n\t\n\t\t\tif (!cl.codes) {\n\t\t\t\tlog.error(\"Impossible to find codes\");\n\t\t\t}\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"tree\";\n\t\t\tconfig.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: obj.code,\n\t\t\t\t\tlabel: obj.label[this.lang.toUpperCase()]\n\t\t\t\t}\n\t\t\t}, this));\n\t\t\tconfig.selector.hideFilter = true;\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configDropdownFromPeriod = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tperiod = domain.period;\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"dropdown\";\n\t\t\tconfig.selector.from = period.from;\n\t\t\tconfig.selector.to = period.to;\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configTreeFromPeriod = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tperiod = domain.period;\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"tree\";\n\t\t\tconfig.selector.from = period.from;\n\t\t\tconfig.selector.to = period.to;\n\t\t\tconfig.selector.hideFilter = true;\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configDropdownFromTimelist = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\ttimelist = domain.timeList || [],\n\t\t\t\tformat = this._getTimeFormat(timelist[0]);\n\t\n\t\t\t//configure selector\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"dropdown\";\n\t\t\tconfig.selector.source = _.map(timelist, _.bind(function (obj) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: obj,\n\t\t\t\t\tlabel: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t\t\t\t}\n\t\t\t}, this));\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configTreeFromTimelist = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\ttimelist = domain.timeList || [],\n\t\t\t\tformat = this._getTimeFormat(timelist[0]);\n\t\n\t\t\t//configure selector\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"tree\";\n\t\t\tconfig.selector.source = _.map(timelist, _.bind(function (obj) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: obj,\n\t\t\t\t\tlabel: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t\t\t\t}\n\t\t\t}, this));\n\t\t\tconfig.selector.hideFilter = true;\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configDropdownFromSource = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tcodes = domain.codes,\n\t\t\t\tcl;\n\t\n\t\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t\t}\n\t\n\t\t\tcl = codes[0];\n\t\n\t\t\tif (!cl.codes) {\n\t\t\t\tlog.error(\"Impossible to find codes\");\n\t\t\t}\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"dropdown\";\n\t\t\tconfig.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: obj.code,\n\t\t\t\t\tlabel: obj.label[this.lang.toUpperCase()]\n\t\t\t\t}\n\t\t\t}, this));\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configDropdownFromCodelist = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tcodes = domain.codes,\n\t\t\t\tcl;\n\t\n\t\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t\t}\n\t\n\t\t\tcl = codes[0];\n\t\n\t\t\tif (!cl.idCodeList) {\n\t\t\t\tlog.error(\"Impossible to find idCodeList\");\n\t\t\t}\n\t\n\t\t\t//configure code list\n\t\t\tconfig.cl = {};\n\t\t\tconfig.cl.uid = cl.idCodeList;\n\t\t\tconfig.cl.version = cl.version;\n\t\n\t\t\t//configure selector\n\t\t\t//html selector configuration\n\t\t\tconfig.selector = {};\n\t\t\tconfig.selector.id = \"dropdown\";\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configTimeFromPeriod = function (c) {\n\t\n\t\t\t/* ~~~~~~ Selector time\n\t\t\t var config = {},\n\t\t\t domain = c.domain || {},\n\t\t\t period = domain.period,\n\t\t\t from = String(period.from),\n\t\t\t to = String(period.to),\n\t\t\t //from = String(period.from).substring(0, String(period.from).length - 2),\n\t\t\t //to = String(period.to).substring(0, String(period.to).length - 2),\n\t\t\t format = this._getTimeFormat(from);\n\t\n\t\t\t //configure selector\n\t\t\t config.selector = {\n\t\t\t config: {}\n\t\t\t };\n\t\t\t config.selector.id = \"time\";\n\t\t\t config.selector.config.minDate = new Moment(from, format);\n\t\t\t config.selector.config.maxDate = new Moment(to, format);\n\t\t\t config.selector.config.format = this._getTimeLabelFormat(from);\n\t\n\t\t\t if (from.length < 5) {\n\t\t\t config.selector.config.viewMode = \"years\";\n\t\t\t }\n\t\n\t\t\t config.format = {\n\t\t\t output : \"time\"\n\t\t\t };\n\t\t\t */\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tperiod = domain.period,\n\t\t\t\tfrom = String(period.from),\n\t\t\t\tto = String(period.to);\n\t\n\t\t\t//configure selector\n\t\t\tconfig.selector = {\n\t\t\t\tconfig: {}\n\t\t\t};\n\t\n\t\t\tconfig.selector.id = \"tree\";\n\t\t\tconfig.selector.from = parseInt(from, 10);\n\t\t\tconfig.selector.to = parseInt(to, 10);\n\t\t\tconfig.selector.hideFilter = true;\n\t\t\tconfig.format = {\n\t\t\t\toutput: \"time\"\n\t\t\t};\n\t\n\t\t\treturn config;\n\t\t};\n\t\n\t\tUtils.prototype._configRangeFromPeriod = function (c) {\n\t\n\t\t\tvar config = {},\n\t\t\t\tdomain = c.domain || {},\n\t\t\t\tperiod = domain.period;\n\t\n\t\t\t//configure selector\n\t\t\tconfig.selector = {\n\t\t\t\tconfig: {}\n\t\t\t};\n\t\n\t\t\tconfig.selector.id = \"range\";\n\t\t\tconfig.selector.config.min = period.from;\n\t\t\tconfig.selector.config.max = period.to;\n\t\t\tconfig.selector.config.type = \"double\";\n\t\t\tconfig.selector.config.prettify_enabled = false;\n\t\n\t\t\treturn config;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._configInput = function (c, o) {\n\t\n\t\t\tvar config = {\n\t\t\t\tselector: {},\n\t\t\t\tformat: {\n\t\t\t\t\toutput: o.output || \"enumeration\"\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tconfig.selector.id = \"input\";\n\t\t\tconfig.selector.type = o.type || \"text\";\n\t\n\t\t\treturn config;\n\t\t};\n\t\n\t\tUtils.prototype._configTemporalColumn = function (c) {\n\t\n\t\t\tvar domain = c.domain || {},\n\t\t\t\tperiod = domain.period,\n\t\t\t\ttimelist = domain.timeList;\n\t\n\t\t\tif (period && period.from && period.to) {\n\t\t\t\t//return this._configRangeFromPeriod(c);\n\t\t\t\t//return this._configTimeFromPeriod(c);\n\t\t\t\t//return this._configDropdownFromPeriod(c);\n\t\t\t\treturn this._configTreeFromPeriod(c);\n\t\t\t}\n\t\n\t\t\tif (timelist) {\n\t\t\t\t//return this._configDropdownFromTimelist(c);\n\t\t\t\treturn this._configTreeFromTimelist(c);\n\t\t\t}\n\t\n\t\t\t//Default set year range\n\t\t\tlog.warn(\"Column \" + c.id + \" set with default time period range.\");\n\t\n\t\t\tc.domain = {\n\t\t\t\tperiod: {\n\t\t\t\t\tfrom: C.defaultPeriodFrom,\n\t\t\t\t\tto: C.defaultPeriodTo\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\treturn this._configTimeFromPeriod(c);\n\t\t};\n\t\n\t\tUtils.prototype._getTimeFormat = function (s) {\n\t\n\t\t\tvar format;\n\t\n\t\t\tswitch (String(s).length) {\n\t\t\t\tcase 4 :\n\t\t\t\t\tformat = \"YYYY\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tformat = \"YYYY MM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tformat = \"YYYY MM DD\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 12:\n\t\t\t\t\tformat = \"YYYY MM DD hh mm\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 14:\n\t\t\t\t\tformat = \"YYYY MM DD hh mm ss\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlog.warn(\"Impossible to find time format for: \" + format);\n\t\t\t}\n\t\n\t\t\treturn format;\n\t\n\t\t};\n\t\n\t\tUtils.prototype._getTimeLabelFormat = function (s) {\n\t\n\t\t\tif (this.timeLabelFormat) {\n\t\t\t\treturn this.timeLabelFormat;\n\t\t\t}\n\t\n\t\t\tvar format;\n\t\n\t\t\tswitch (String(s).length) {\n\t\t\t\tcase 4 :\n\t\t\t\t\tformat = \"YYYY\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\tformat = \"L\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\tformat = \"L\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 14:\n\t\t\t\t\tformat = \"lll\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlog.warn(\"Impossible to find time label format for: \" + format);\n\t\t\t}\n\t\n\t\t\treturn format;\n\t\n\t\t};\n\t\n\t\t/*   /!* Revert Process *!/\n\t\t /!**\n\t\t * Extracts a blank selection from FENIX process\n\t\t * default values\n\t\t * @param {Object} filter\n\t\t * @return {Object} filter configuration\n\t\t *!/\n\t\t Utils.prototype.revertProcess = function (filter) {\n\t\n\t\t var configuration = {};\n\t\n\t\t if (Array.isArray(filter)) {\n\t\n\t\t _.each(filter, _.bind(function ( step ) {\n\t\n\t\t var fn = \"_revert_\" + step.name;\n\t\n\t\t if ( $.isFunction(this[fn]) && step.parameters) {\n\t\t configuration[step.name] = $.extend(true, this[fn](step));\n\t\t } else {\n\t\t log.error(fn + \" is not a valid reverse function\");\n\t\t }\n\t\n\t\t }, this));\n\t\t }\n\t\n\t\t return configuration;\n\t\n\t\t };\n\t\n\t\t Utils.prototype._revert_filter = function (step) {\n\t\t log.info(\"_revert_filter \" + JSON.stringify(step));\n\t\n\t\t var self = this,\n\t\t result = {},\n\t\t parameters = step.parameters,\n\t\t rows = parameters.rows,\n\t\t columns = parameters.columns;\n\t\n\t\t _.each(rows, function ( obj , key) {\n\t\n\t\t if ( obj.time ) {\n\t\t result[key] = self._revert_time_row(obj);\n\t\t } else {\n\t\t result[key] = self._revert_codes_row(obj);\n\t\t }\n\t\n\t\t });\n\t\n\t\t return result;\n\t\t };\n\t\n\t\t Utils.prototype._revert_time_row = function ( step ) {\n\t\n\t\t console.log(step)\n\t\n\t\t };\n\t\n\t\t Utils.prototype._revert_codes_row = function ( step ) {\n\t\n\t\t console.log(step)\n\t\n\t\n\t\t };\n\t\n\t\t Utils.prototype._revert_group = function (step) {\n\t\t log.info(\"_revert_group \" + JSON.stringify(step));\n\t\n\t\n\t\t return;\n\t\t };\n\t\n\t\t Utils.prototype._revert_order = function (step) {\n\t\t log.info(\"_revert_order \" + JSON.stringify(step));\n\t\n\t\t return;\n\t\t };\n\t\t */\n\t\t/* Validation */\n\t\n\t\tUtils.prototype._isFenixResource = function (res) {\n\t\n\t\t\tvar valid = true,\n\t\t\t\terrors = [],\n\t\t\t\tresourceType = this.getNestedProperty(\"metadata.meContent.resourceRepresentationType\", res);\n\t\n\t\t\tif (!res.hasOwnProperty(\"metadata\")) {\n\t\t\t\terrors.push({code: ERR.INVALID_METADATA});\n\t\t\t\tvalid = false;\n\t\t\t}\n\t\n\t\t\tif (valid && !res.metadata.hasOwnProperty(\"dsd\")) {\n\t\t\t\terrors.push({code: ERR.INVALID_DSD});\n\t\t\t\tvalid = false;\n\t\t\t}\n\t\n\t\t\t//NOT need field for FENIX GEOGRAPHIC RESOURCE\n\t\t\tif (resourceType === \"dataset\" && valid && (!res.metadata.dsd.hasOwnProperty(\"columns\") || !Array.isArray(res.metadata.dsd.columns))) {\n\t\t\t\terrors.push({code: ERR.INVALID_COLUMNS});\n\t\t\t}\n\t\n\t\t\treturn errors.length > 0 ? errors : valid;\n\t\t};\n\t\n\t\tUtils.prototype._isFenixColumn = function (c) {\n\t\n\t\t\tvar valid = true,\n\t\t\t\terrors = [];\n\t\n\t\t\tif (!c.hasOwnProperty(\"dataType\")) {\n\t\t\t\terrors.push({code: ERR.INVALID_COLUMN_DATATYPE});\n\t\t\t\tvalid = false;\n\t\t\t}\n\t\n\t\t\treturn errors.length > 0 ? errors : valid;\n\t\t};\n\t\n\t\treturn new Utils();\n\t\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function ( ) {\n\t\n\t    'use strict';\n\t\n\t    var prefix = \"\";\n\t\n\t    return {\n\t\n\t        //Utils\n\t        INVALID_FENIX_RESOURCE: prefix + \"invalid_fenix_resource\",\n\t        INVALID_METADATA: prefix + \"invalid_metadata\",\n\t        INVALID_DSD: prefix + \"invalid_dsd\",\n\t        INVALID_COLUMNS: prefix + \"invalid_dsd\",\n\t        INVALID_FENIX_COLUMN: prefix + \"invalid_fenix_column\",\n\t        INVALID_COLUMN_DATATYPE : prefix + \"invalid_column_datatype\",\n\t        UNKNOWN_FENIX_COLUMN_DATATYPE :prefix + \"unknown_fenix_column_datatype\",\n\t\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;if (false) {\n\t    var define = require('amdefine')(module);\n\t}\n\t\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t\n\t    'use strict';\n\t\n\t    return {\n\t\n\t        forbiddenSubjects: [\"value\"],\n\t        exclude: [], //exclude id\n\t        common: {},\n\t        lang: 'EN',\n\t        defaultPeriodFrom: 1970,\n\t        defaultPeriodTo: 2017\n\t\n\t    }\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }\n/******/ ])});;\n\n\n/** WEBPACK FOOTER **\n ** fenix-ui-filter-utils.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4d108aa7d4b0457b1794\n **/","if (typeof define !== 'function') {\n\tvar define = require('amdefine')(module);\n}\n\ndefine([\n\t'../config/errors',\n\t'../config/config',\n\t'jquery',\n\t'underscore',\n\t'loglevel',\n\t'handlebars'\n], function (ERR, C, $, _, log, Handlebars) {\n\n\t'use strict';\n\n\tfunction Utils() {\n\n\t\treturn this;\n\t}\n\n\t//FENIX\n\n\tUtils.prototype.compileFilter = function (id, values, items) {\n\n\t\t$.extend(true, this, C);\n\n\t\tvar config = items[id] || {},\n\t\t\tformatConfig = config.format || {},\n\t\t\ttemplate = formatConfig.template,\n\t\t\toutput = formatConfig.output || \"codes\";\n\n\t\tif (template) {\n\t\t\treturn this.compileTemplate(id, values, config, template);\n\t\t}\n\n\t\tvar key = formatConfig.dimension || id,\n\t\t\ttmpl;\n\n\t\tswitch (output.toLocaleLowerCase()) {\n\t\t\tcase \"codes\" :\n\n\t\t\t\ttmpl = '{ \"codes\":[{\"uid\": \"{{{uid}}}\", \"version\": \"{{version}}\", \"codes\": [{{{codes}}}] } ]}';\n\t\t\t\treturn this.compileTemplate(id, values, config, key, tmpl);\n\n\t\t\t\tbreak;\n\t\t\tcase \"time\" :\n\n\t\t\t\treturn this.createTimeFilter(id, values, config, key);\n\t\t\t\tbreak;\n\n\t\t\tcase \"enumeration\" :\n\n\t\t\t\treturn this.createEnumerationFilter(id, values, config, key);\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tlog.warn(id + \" not included in the result set. Missing format configuration.\");\n\t\t\t\treturn {};\n\t\t}\n\n\t};\n\n\tUtils.prototype.compileTemplate = function (id, values, config, key, template) {\n\n\t\t/*\n\t\t Priority\n\t\t - values\n\t\t - format configuration\n\t\t - code list configuration\n\t\t */\n\n\t\tvar model = $.extend(true, config.cl, config.format, {codes: '\"' + values.join('\",\"') + '\"'});\n\n\t\tif (!template) {\n\t\t\tlog.error(\"Impossible to find '\" + id + \"' process template. Check your '\" + id + \"'.filter.process configuration.\")\n\t\t}\n\n\t\tif (!model.uid) {\n\t\t\tlog.error(\"Impossible to find '\" + id + \"' code list configuration for FENIX output format export.\");\n\t\t\treturn;\n\t\t}\n\n\t\tvar tmpl = Handlebars.compile(template),\n\t\t\tprocess = JSON.parse(tmpl(model)),\n\t\t\tcodes = process.codes;\n\n\t\t//Remove empty version attributes\n\t\t_.each(codes, function (obj) {\n\t\t\tif (!obj.version) {\n\t\t\t\tdelete obj.version;\n\t\t\t}\n\t\t});\n\n\t\treturn process;\n\n\t};\n\n\tUtils.prototype.createTimeFilter = function (id, values, config, key) {\n\n\t\tvar time = [],\n\t\t\tvaluesAreObject = typeof values[0] === 'object',\n\t\t\tv;\n\n\t\tif (valuesAreObject) {\n\n\t\t\tvar from = _.findWhere(values, {parent: \"from\"}) || {},\n\t\t\t\tto = _.findWhere(values, {parent: \"to\"}) || {},\n\t\t\t\tcouple = {from: null, to: null};\n\n\t\t\tcouple.from = from.value;\n\t\t\tcouple.to = to.value;\n\n\t\t\ttime.push($.extend({}, couple));\n\n\t\t} else {\n\n\t\t\tv = values.map(function (a) {\n\t\t\t\treturn parseInt(a, 10);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn a - b;\n\t\t\t});\n\n\n\t\t\t_.each(v, function (i) {\n\t\t\t\ttime.push({from: i, to: i});\n\t\t\t});\n\n\t\t}\n\n\t\treturn {time: time};\n\t};\n\n\tUtils.prototype.createEnumerationFilter = function (id, values, config, key) {\n\n\t\treturn {enumeration: values};\n\n\t};\n\n\tUtils.prototype.cleanArray = function (actual) {\n\t\tvar newArray = [];\n\t\tfor (var i = 0; i < actual.length; i++) {\n\t\t\tif (actual[i]) {\n\t\t\t\tnewArray.push(actual[i]);\n\t\t\t}\n\t\t}\n\t\treturn newArray;\n\t};\n\n\t/* FILTER UTILS */\n\n\t/**\n\t * Creates a FENIX filter configuration from a\n\t * FENIX resource\n\t * @param {Object} o\n\t * @return {Object} filter configuration\n\t */\n\tUtils.prototype.createConfiguration = function (o) {\n\t\tlog.info(\"Create filter configuration from:\");\n\t\tlog.info(o);\n\n\t\t$.extend(true, this, o);\n\n\t\tvar configuration = {};\n\n\t\tif (this._isFenixResource(o.model) === true) {\n\t\t\tlog.info(\"Valid resource\");\n\n\t\t\t_.each(o.model.metadata.dsd.columns, _.bind(function (c) {\n\n\t\t\t\tif (!_.contains(this.forbiddenSubjects, c.subject) && !_.contains(this.exclude, c.id) && !c.id.endsWith(\"_\" + this.lang.toUpperCase())) {\n\t\t\t\t\tconfiguration[c.id] = $.extend(true, {}, this._processFxColumn(c), this.common);\n\t\t\t\t} else {\n\t\t\t\t\tlog.warn(c.id + \" was excluded. [id: \" + c.id + \", subject: \" + c.subject + \"]\");\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t} else {\n\t\t\tlog.error(ERR.INVALID_FENIX_RESOURCE);\n\t\t}\n\n\t\treturn configuration;\n\t};\n\n\t/**\n\t * Merges a FENIX filter configuration with\n\t * default values\n\t * @param {Object} config\n\t * @param {Object} sync\n\t * @return {Object} filter configuration\n\t */\n\tUtils.prototype.mergeConfigurations = function (config, s) {\n\n\t\tvar sync = s.toolbar ? s.toolbar : s;\n\n\t\tif (sync) {\n\n\t\t\tvar values = sync.values;\n\n\t\t\t_.each(values, _.bind(function (obj, key) {\n\n\t\t\t\tif (config.hasOwnProperty(key)) {\n\t\t\t\t\tconfig[key].selector.default = values[key];\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t}\n\n\t\treturn config;\n\n\t};\n\n\t// private fns\n\n\tUtils.prototype._processFxColumn = function (c) {\n\n\t\tvar conf = {};\n\n\t\tif (this._isFenixColumn(c) === true) {\n\t\t\tlog.info(\"Valid column with dataType: \" + c.dataType.toLowerCase() + \" [column.id = \" + c.id + \" ]\");\n\n\t\t\tswitch (c.dataType.toLowerCase()) {\n\t\t\t\tcase \"customcode\" :\n\t\t\t\t\tconf = this._processCustomCodeColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"enumeration\" :\n\t\t\t\t\tconf = this._processEnumerationColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"code\" :\n\t\t\t\t\tconf = this._processCodeColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"date\" :\n\t\t\t\t\tconf = this._processDateColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"month\" :\n\t\t\t\t\tconf = this._processMonthColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"year\" :\n\t\t\t\t\tconf = this._processYearColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"time\" :\n\t\t\t\t\tconf = this._processTimeColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text\" :\n\t\t\t\t\tconf = this._processTextColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"label\" :\n\t\t\t\t\tconf = this._processLabelColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"number\" :\n\t\t\t\t\tconf = this._processNumberColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"percentage\" :\n\t\t\t\t\tconf = this._processPercentageColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bool\" :\n\t\t\t\t\tconf = this._processBooleanColumn(c);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlog.error(ERR.UNKNOWN_FENIX_COLUMN_DATATYPE, c.dataType.toLowerCase());\n\n\t\t\t}\n\t\t} else {\n\t\t\tlog.error(ERR.INVALID_FENIX_COLUMN);\n\t\t}\n\n\t\treturn $.extend(true, {}, conf, this._commonProcessColumn(c));\n\t};\n\n\t/* processes for CODE FX column */\n\n\tUtils.prototype._processCustomCodeColumn = function (c) {\n\t\treturn this._configTreeFromSource(c);\n\t\t//return this._configDropdownFromSource(c);\n\t};\n\n\tUtils.prototype._processEnumerationColumn = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tenumeration = domain.enumeration || [];\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"tree\";\n\t\tconfig.selector.hideFilter = true;\n\t\tconfig.selector.source = _.map(enumeration, function (obj) {\n\t\t\treturn {\n\t\t\t\tvalue: obj,\n\t\t\t\tlabel: obj\n\t\t\t}\n\t\t});\n\n\t\treturn config;\n\t};\n\n\tUtils.prototype._processCodeColumn = function (c) {\n\n\t\treturn this._configTreeFromCodelist(c);\n\t\t//return this._configDropdownFromCodelist(c);\n\n\t};\n\n\t/* processes for TIME FX column */\n\n\tUtils.prototype._processDateColumn = function (c) {\n\n\t\tvar domain = c.domain || {},\n\t\t\tperiod = domain.period,\n\t\t\ttimelist = domain.timeList;\n\n\t\tif (period && period.from && period.to) {\n\t\t\t//return this._configRangeFromPeriod(c);\n\t\t\treturn this._configTimeFromPeriod(c);\n\t\t\t//return this._configDropdownFromPeriod(c);\n\t\t}\n\n\t\tif (timelist) {\n\t\t\t//return this._configDropdownFromTimelist(c);\n\t\t\treturn this._configTreeFromTimelist(c);\n\t\t}\n\n\t\tlog.warn(\"Impossible to find process for column \" + c.id);\n\n\t\treturn {};\n\n\t};\n\n\tUtils.prototype._processMonthColumn = function (c) {\n\n\t\treturn this._configTemporalColumn(c);\n\t};\n\n\tUtils.prototype._processYearColumn = function (c) {\n\n\t\treturn this._configTemporalColumn(c);\n\t};\n\n\tUtils.prototype._processTimeColumn = function (c) {\n\n\t\treturn this._configTemporalColumn(c);\n\n\t};\n\n\t/* processes for TEXT FX column */\n\n\tUtils.prototype._processTextColumn = function (c) {\n\n\t\treturn this._configInput(c, {type: \"text\"});\n\t};\n\n\tUtils.prototype._processLabelColumn = function (c) {\n\n\t\treturn this._configInput(c, {type: \"text\"});\n\t};\n\n\t/* processes for OTHER FX column */\n\n\tUtils.prototype._processNumberColumn = function (c) {\n\n\t\treturn this._configInput(c, {type: \"number\", output: \"time\"});\n\t};\n\n\tUtils.prototype._processPercentageColumn = function (c) {\n\t\tlog.warn(\"TODO process\");\n\t};\n\n\tUtils.prototype._processBooleanColumn = function (c) {\n\t\treturn this._configInput(c, {type: \"checkbox\"});\n\n\t};\n\n\t/* Common processes */\n\n\tUtils.prototype._commonProcessColumn = function (c) {\n\n\t\tvar config = {\n\t\t\ttemplate: {},\n\t\t\tformat: {\n\t\t\t\tdimension: c.id\n\t\t\t}\n\t\t};\n\n\t\tif (c.title && c.title[this.lang.toUpperCase()]) {\n\t\t\tconfig.template.title = c.title[this.lang.toUpperCase()];\n\t\t}\n\n\t\treturn config;\n\t};\n\n\tUtils.prototype._configTreeFromCodelist = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tcodes = domain.codes,\n\t\t\tcl;\n\n\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t}\n\n\t\tcl = codes[0];\n\n\t\tif (!cl.idCodeList) {\n\t\t\tlog.error(\"Impossible to find idCodeList\");\n\t\t}\n\n\t\t//configure code list\n\t\tconfig.cl = {};\n\t\tconfig.cl.uid = cl.idCodeList;\n\t\tconfig.cl.version = cl.version;\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"tree\";\n\t\tconfig.selector.lazy = true;\n\t\tconfig.selector.hideFilter = true;\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configTreeFromSource = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tcodes = domain.codes,\n\t\t\tcl;\n\n\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t}\n\n\t\tcl = codes[0];\n\n\t\tif (!cl.codes) {\n\t\t\tlog.error(\"Impossible to find codes\");\n\t\t}\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"tree\";\n\t\tconfig.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t\t\treturn {\n\t\t\t\tvalue: obj.code,\n\t\t\t\tlabel: obj.label[this.lang.toUpperCase()]\n\t\t\t}\n\t\t}, this));\n\t\tconfig.selector.hideFilter = true;\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configDropdownFromPeriod = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tperiod = domain.period;\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"dropdown\";\n\t\tconfig.selector.from = period.from;\n\t\tconfig.selector.to = period.to;\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configTreeFromPeriod = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tperiod = domain.period;\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"tree\";\n\t\tconfig.selector.from = period.from;\n\t\tconfig.selector.to = period.to;\n\t\tconfig.selector.hideFilter = true;\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configDropdownFromTimelist = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\ttimelist = domain.timeList || [],\n\t\t\tformat = this._getTimeFormat(timelist[0]);\n\n\t\t//configure selector\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"dropdown\";\n\t\tconfig.selector.source = _.map(timelist, _.bind(function (obj) {\n\t\t\treturn {\n\t\t\t\tvalue: obj,\n\t\t\t\tlabel: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t\t\t}\n\t\t}, this));\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configTreeFromTimelist = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\ttimelist = domain.timeList || [],\n\t\t\tformat = this._getTimeFormat(timelist[0]);\n\n\t\t//configure selector\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"tree\";\n\t\tconfig.selector.source = _.map(timelist, _.bind(function (obj) {\n\t\t\treturn {\n\t\t\t\tvalue: obj,\n\t\t\t\tlabel: new Moment(obj, format).format(this._getTimeLabelFormat(obj))\n\t\t\t}\n\t\t}, this));\n\t\tconfig.selector.hideFilter = true;\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configDropdownFromSource = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tcodes = domain.codes,\n\t\t\tcl;\n\n\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t}\n\n\t\tcl = codes[0];\n\n\t\tif (!cl.codes) {\n\t\t\tlog.error(\"Impossible to find codes\");\n\t\t}\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"dropdown\";\n\t\tconfig.selector.source = _.map(cl.codes, _.bind(function (obj) {\n\t\t\treturn {\n\t\t\t\tvalue: obj.code,\n\t\t\t\tlabel: obj.label[this.lang.toUpperCase()]\n\t\t\t}\n\t\t}, this));\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configDropdownFromCodelist = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tcodes = domain.codes,\n\t\t\tcl;\n\n\t\tif (!Array.isArray(codes) || codes.length > 1) {\n\t\t\tlog.warn(\"Invalid domain.codes attributes\");\n\t\t}\n\n\t\tcl = codes[0];\n\n\t\tif (!cl.idCodeList) {\n\t\t\tlog.error(\"Impossible to find idCodeList\");\n\t\t}\n\n\t\t//configure code list\n\t\tconfig.cl = {};\n\t\tconfig.cl.uid = cl.idCodeList;\n\t\tconfig.cl.version = cl.version;\n\n\t\t//configure selector\n\t\t//html selector configuration\n\t\tconfig.selector = {};\n\t\tconfig.selector.id = \"dropdown\";\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configTimeFromPeriod = function (c) {\n\n\t\t/* ~~~~~~ Selector time\n\t\t var config = {},\n\t\t domain = c.domain || {},\n\t\t period = domain.period,\n\t\t from = String(period.from),\n\t\t to = String(period.to),\n\t\t //from = String(period.from).substring(0, String(period.from).length - 2),\n\t\t //to = String(period.to).substring(0, String(period.to).length - 2),\n\t\t format = this._getTimeFormat(from);\n\n\t\t //configure selector\n\t\t config.selector = {\n\t\t config: {}\n\t\t };\n\t\t config.selector.id = \"time\";\n\t\t config.selector.config.minDate = new Moment(from, format);\n\t\t config.selector.config.maxDate = new Moment(to, format);\n\t\t config.selector.config.format = this._getTimeLabelFormat(from);\n\n\t\t if (from.length < 5) {\n\t\t config.selector.config.viewMode = \"years\";\n\t\t }\n\n\t\t config.format = {\n\t\t output : \"time\"\n\t\t };\n\t\t */\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tperiod = domain.period,\n\t\t\tfrom = String(period.from),\n\t\t\tto = String(period.to);\n\n\t\t//configure selector\n\t\tconfig.selector = {\n\t\t\tconfig: {}\n\t\t};\n\n\t\tconfig.selector.id = \"tree\";\n\t\tconfig.selector.from = parseInt(from, 10);\n\t\tconfig.selector.to = parseInt(to, 10);\n\t\tconfig.selector.hideFilter = true;\n\t\tconfig.format = {\n\t\t\toutput: \"time\"\n\t\t};\n\n\t\treturn config;\n\t};\n\n\tUtils.prototype._configRangeFromPeriod = function (c) {\n\n\t\tvar config = {},\n\t\t\tdomain = c.domain || {},\n\t\t\tperiod = domain.period;\n\n\t\t//configure selector\n\t\tconfig.selector = {\n\t\t\tconfig: {}\n\t\t};\n\n\t\tconfig.selector.id = \"range\";\n\t\tconfig.selector.config.min = period.from;\n\t\tconfig.selector.config.max = period.to;\n\t\tconfig.selector.config.type = \"double\";\n\t\tconfig.selector.config.prettify_enabled = false;\n\n\t\treturn config;\n\n\t};\n\n\tUtils.prototype._configInput = function (c, o) {\n\n\t\tvar config = {\n\t\t\tselector: {},\n\t\t\tformat: {\n\t\t\t\toutput: o.output || \"enumeration\"\n\t\t\t}\n\t\t};\n\n\t\tconfig.selector.id = \"input\";\n\t\tconfig.selector.type = o.type || \"text\";\n\n\t\treturn config;\n\t};\n\n\tUtils.prototype._configTemporalColumn = function (c) {\n\n\t\tvar domain = c.domain || {},\n\t\t\tperiod = domain.period,\n\t\t\ttimelist = domain.timeList;\n\n\t\tif (period && period.from && period.to) {\n\t\t\t//return this._configRangeFromPeriod(c);\n\t\t\t//return this._configTimeFromPeriod(c);\n\t\t\t//return this._configDropdownFromPeriod(c);\n\t\t\treturn this._configTreeFromPeriod(c);\n\t\t}\n\n\t\tif (timelist) {\n\t\t\t//return this._configDropdownFromTimelist(c);\n\t\t\treturn this._configTreeFromTimelist(c);\n\t\t}\n\n\t\t//Default set year range\n\t\tlog.warn(\"Column \" + c.id + \" set with default time period range.\");\n\n\t\tc.domain = {\n\t\t\tperiod: {\n\t\t\t\tfrom: C.defaultPeriodFrom,\n\t\t\t\tto: C.defaultPeriodTo\n\t\t\t}\n\t\t};\n\n\t\treturn this._configTimeFromPeriod(c);\n\t};\n\n\tUtils.prototype._getTimeFormat = function (s) {\n\n\t\tvar format;\n\n\t\tswitch (String(s).length) {\n\t\t\tcase 4 :\n\t\t\t\tformat = \"YYYY\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tformat = \"YYYY MM\";\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tformat = \"YYYY MM DD\";\n\t\t\t\tbreak;\n\t\t\tcase 12:\n\t\t\t\tformat = \"YYYY MM DD hh mm\";\n\t\t\t\tbreak;\n\t\t\tcase 14:\n\t\t\t\tformat = \"YYYY MM DD hh mm ss\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlog.warn(\"Impossible to find time format for: \" + format);\n\t\t}\n\n\t\treturn format;\n\n\t};\n\n\tUtils.prototype._getTimeLabelFormat = function (s) {\n\n\t\tif (this.timeLabelFormat) {\n\t\t\treturn this.timeLabelFormat;\n\t\t}\n\n\t\tvar format;\n\n\t\tswitch (String(s).length) {\n\t\t\tcase 4 :\n\t\t\t\tformat = \"YYYY\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tformat = \"L\";\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tformat = \"L\";\n\t\t\t\tbreak;\n\t\t\tcase 14:\n\t\t\t\tformat = \"lll\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlog.warn(\"Impossible to find time label format for: \" + format);\n\t\t}\n\n\t\treturn format;\n\n\t};\n\n\t/*   /!* Revert Process *!/\n\t /!**\n\t * Extracts a blank selection from FENIX process\n\t * default values\n\t * @param {Object} filter\n\t * @return {Object} filter configuration\n\t *!/\n\t Utils.prototype.revertProcess = function (filter) {\n\n\t var configuration = {};\n\n\t if (Array.isArray(filter)) {\n\n\t _.each(filter, _.bind(function ( step ) {\n\n\t var fn = \"_revert_\" + step.name;\n\n\t if ( $.isFunction(this[fn]) && step.parameters) {\n\t configuration[step.name] = $.extend(true, this[fn](step));\n\t } else {\n\t log.error(fn + \" is not a valid reverse function\");\n\t }\n\n\t }, this));\n\t }\n\n\t return configuration;\n\n\t };\n\n\t Utils.prototype._revert_filter = function (step) {\n\t log.info(\"_revert_filter \" + JSON.stringify(step));\n\n\t var self = this,\n\t result = {},\n\t parameters = step.parameters,\n\t rows = parameters.rows,\n\t columns = parameters.columns;\n\n\t _.each(rows, function ( obj , key) {\n\n\t if ( obj.time ) {\n\t result[key] = self._revert_time_row(obj);\n\t } else {\n\t result[key] = self._revert_codes_row(obj);\n\t }\n\n\t });\n\n\t return result;\n\t };\n\n\t Utils.prototype._revert_time_row = function ( step ) {\n\n\t console.log(step)\n\n\t };\n\n\t Utils.prototype._revert_codes_row = function ( step ) {\n\n\t console.log(step)\n\n\n\t };\n\n\t Utils.prototype._revert_group = function (step) {\n\t log.info(\"_revert_group \" + JSON.stringify(step));\n\n\n\t return;\n\t };\n\n\t Utils.prototype._revert_order = function (step) {\n\t log.info(\"_revert_order \" + JSON.stringify(step));\n\n\t return;\n\t };\n\t */\n\t/* Validation */\n\n\tUtils.prototype._isFenixResource = function (res) {\n\n\t\tvar valid = true,\n\t\t\terrors = [],\n\t\t\tresourceType = this.getNestedProperty(\"metadata.meContent.resourceRepresentationType\", res);\n\n\t\tif (!res.hasOwnProperty(\"metadata\")) {\n\t\t\terrors.push({code: ERR.INVALID_METADATA});\n\t\t\tvalid = false;\n\t\t}\n\n\t\tif (valid && !res.metadata.hasOwnProperty(\"dsd\")) {\n\t\t\terrors.push({code: ERR.INVALID_DSD});\n\t\t\tvalid = false;\n\t\t}\n\n\t\t//NOT need field for FENIX GEOGRAPHIC RESOURCE\n\t\tif (resourceType === \"dataset\" && valid && (!res.metadata.dsd.hasOwnProperty(\"columns\") || !Array.isArray(res.metadata.dsd.columns))) {\n\t\t\terrors.push({code: ERR.INVALID_COLUMNS});\n\t\t}\n\n\t\treturn errors.length > 0 ? errors : valid;\n\t};\n\n\tUtils.prototype._isFenixColumn = function (c) {\n\n\t\tvar valid = true,\n\t\t\terrors = [];\n\n\t\tif (!c.hasOwnProperty(\"dataType\")) {\n\t\t\terrors.push({code: ERR.INVALID_COLUMN_DATATYPE});\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn errors.length > 0 ? errors : valid;\n\t};\n\n\treturn new Utils();\n\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/index.js\n ** module id = 1\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\n\ndefine(function ( ) {\n\n    'use strict';\n\n    var prefix = \"\";\n\n    return {\n\n        //Utils\n        INVALID_FENIX_RESOURCE: prefix + \"invalid_fenix_resource\",\n        INVALID_METADATA: prefix + \"invalid_metadata\",\n        INVALID_DSD: prefix + \"invalid_dsd\",\n        INVALID_COLUMNS: prefix + \"invalid_dsd\",\n        INVALID_FENIX_COLUMN: prefix + \"invalid_fenix_column\",\n        INVALID_COLUMN_DATATYPE : prefix + \"invalid_column_datatype\",\n        UNKNOWN_FENIX_COLUMN_DATATYPE :prefix + \"unknown_fenix_column_datatype\",\n\n    };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/errors.js\n ** module id = 2\n ** module chunks = 0\n **/","if (typeof define !== 'function') {\n    var define = require('amdefine')(module);\n}\n\ndefine(function () {\n\n    'use strict';\n\n    return {\n\n        forbiddenSubjects: [\"value\"],\n        exclude: [], //exclude id\n        common: {},\n        lang: 'EN',\n        defaultPeriodFrom: 1970,\n        defaultPeriodTo: 2017\n\n    }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/config.js\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"loglevel\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"handlebars\"\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}